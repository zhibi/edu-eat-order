define("waimai:widget/menu/filter/filter",function(e,t,i){var n=$("#menuFilter"),r=$(".menu-filter"),a=n.find(".menu-filter"),s=a.find("a"),o=n.find(".curMenu"),m=e("waimai:static/utils/GlobalTips"),u=-1,l=e("waimai:widget/common/menucommon/cart/cart"),d={},f=[];$(".menu-filter a").click(function(e){e.preventDefault();var i=$(this).attr("data");$(t).trigger("click.filter",{index:i,offset:15}),addNStat({da_src:"filterBk.itemlnk",da_act:"click",da_trd:"waimai"});var n=$(this).find(".item-name");n.hasClass("menu-hover")&&n.removeClass("menu-hover")}).mouseenter(function(){var e=$(this).find(".item-name");e.hasClass("cur")||e.addClass("menu-hover")}).mouseleave(function(){$(this).find(".item-name").removeClass("menu-hover")});var c=$(".menu-filter a").height(),h=parseInt($(".menu-filter a").css("marginTop"))||0,g=parseInt($(".menu-filter a").css("marginBottom"))||0,v=c+h+g,p=r.height(),C=parseInt(r.css("paddingTop"))||0,w=parseInt(r.css("paddingBottom"))||0,T=p-C-w;if(T>3*v){r.height(3*v),r.addClass("hasArr overHidden");var A=null;r.hover(function(){clearTimeout(A);var e=$(this),t=e.height(),i=e.css("height","auto").height();e.height(t).animate({height:i},"slow"),e.toggleClass("upArr"),$(".bottomArr").addClass("upArr")},function(){var e=$(this);clearTimeout(A),A=setTimeout(function(){e.animate({height:3*v+"px"},"slow"),e.toggleClass("upArr"),$(".bottomArr").removeClass("upArr")},500)})}t=i.exports={init:function(e){for(var t=e,i=1,n=0,r=t.length;r>n;n++)i=t[n].category_id?t[n].category_id:1,d[i]=t[n].catalog,f.push(i);this.initBindEvent()},setCurMenu:function(e){if(e!=u){if(-1==e)return u=e,void n.hide();s.find(".item-name").removeClass("cur"),u=e,s.eq(u).find(".item-name").removeClass("menu-hover").addClass("cur"),n.show();var t=s.eq(u);o.html("<strong>"+t.find(".item-name").html()+"</strong>"+t.find(".item-num").html())}},initBindEvent:function(){$(l).bind("filter.requireSelect",function(e,i){t.setCurCategory(i)})},setCurCategory:function(e){var t=f.indexOf(e);return-1==t?!1:d[e]?($('[category_id="'+e+'"]').click(),void setTimeout(function(){m.tip("您还有"+d[e]+"分类的菜品未选择,请选择后再下单","offTop")},100)):""}}});