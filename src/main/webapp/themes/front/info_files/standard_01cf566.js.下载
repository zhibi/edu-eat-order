define("waimai:widget/common/ui/pagination/standard/standard",function(require,exports,module){var PaginationCore=require("waimai:widget/common/ui/pagination/core"),standardTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push('<div class="widget-pagination-standard clearfix"><span class="pager-wrap"><button class="btn prev-trigger" data-node="prev_trigger"><</button><ul class="pagination clearfix" data-node="pager_wrap"></ul><button class="btn next-trigger" data-node="next_trigger">></button></span><span class="info-wrap">'),showTotal&&_template_fun_array.push('<span class="total-wrap" data-node="total_wrap">共 ',"undefined"==typeof total?"":baidu.template._encodeHTML(total)," 条</span>"),_template_fun_array.push(""),showSelectPageSize){_template_fun_array.push('<span class="page-size-select">每页显示<select class="form-control" data-node="page_size_select">');for(var i=0;i<pageSizeArr.length;i++)_template_fun_array.push('<option value="',"undefined"==typeof pageSizeArr[i]?"":baidu.template._encodeHTML(pageSizeArr[i]),'" '),pageSize==pageSizeArr[i]&&_template_fun_array.push("selected"),_template_fun_array.push(">","undefined"==typeof pageSizeArr[i]?"":baidu.template._encodeHTML(pageSizeArr[i]),"</option>");_template_fun_array.push("</select></span>")}_template_fun_array.push("</span></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],moreItemTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<li><a href="javascript:void(0)" class="more">...</a></li>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],itemTmpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<li class="'),active&&_template_fun_array.push("active"),_template_fun_array.push('"><a href="javascript:void(0)">',"undefined"==typeof num?"":baidu.template._encodeHTML(num),"</a></li>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],TRUE=!0,FALSE=!1,hiddenCls="hidden",disabledCls="disabled",PAGE_SIZE_ARR=[10,20,40,80,100],StandardPagination=PaginationCore.extend({attrs:{showTotal:TRUE,showSelectPageSize:TRUE,$container:$("body")},initialize:function(e){var a=this;StandardPagination.superclass.initialize.call(a,e),a.render()},render:function(){var e=this,a=e.get("pageSize"),t=e.get("showTotal"),n=PAGE_SIZE_ARR,r=e.get("showSelectPageSize");-1===$.inArray(a,n)&&(n=[a].concat(n)),e.$el&&e.$el.remove(),e.$el=$(standardTmpl({showTotal:t,showSelectPageSize:r,total:e.get("total"),pageSize:a,pageSizeArr:n})),e.get("$container").append(e.$el),e.$pagerWrap=e.$el.find("[data-node=pager_wrap]"),e.$nextTrigger=e.$el.find("[data-node=next_trigger]"),e.$prevTrigger=e.$el.find("[data-node=prev_trigger]"),e.$pageSizeSelect=e.$el.find("[data-node=page_size_select]"),e.$totalWrap=e.$el.find("[data-node=total_wrap]"),e.renderPager(),e.bindEvent(),e.updateStatus()},updateStatus:function(){var e,a=this,t="active",n=a.get("curPage"),r=a.get("totalPage");a.$nextTrigger.toggleClass(disabledCls,n>=r),a.$prevTrigger.toggleClass(disabledCls,1>=n),a.$pagerWrap.children().each(function(a,r){e=$(r),Number(e.text())===n?e.addClass(t):e.removeClass(t)})},goPage:function(e){var a=this,t=2;return StandardPagination.superclass.goPage.call(this,e)?((a.curPageRange.begin>1&&e-t<a.curPageRange.begin||a.curPageRange.end<a.get("totalPage")&&e+t>a.curPageRange.end)&&a.renderPager(),a.updateStatus(),TRUE):FALSE},bindEvent:function(){var e,a,t=this;t.$el.on("click","a",function(n){a=$(n.currentTarget),e=parseInt(a.text(),10),a.hasClass("more")||t.goPage(e)}),t.$prevTrigger.on("click",function(e){$(e.currentTarget).hasClass(disabledCls)||t.goPage(t.get("curPage")-1)}),t.$nextTrigger.on("click",function(e){$(e.currentTarget).hasClass(disabledCls)||t.goPage(t.get("curPage")+1)}),t.$pageSizeSelect.on("change",function(){t.trigger("changePageSize",{pageSize:t.$pageSizeSelect.val()})})},oldupdateTotal:function(e){var a=this,t=a.get("total");return 0>e||e===t||"[object Number]"!==toString.call(e)?!0:(a.set("total",e),a.renderPager(),void a.$totalWrap.html("共"+e+"条"))},renderPager:function(){var e=this,a=$(document.createDocumentFragment()),t=e.getRangePage(),n=e.get("totalPage"),r=e.get("curPage");e.$pagerWrap.empty(),t.begin>1&&(a.append(itemTmpl({num:1,active:FALSE})),a.append(moreItemTmpl()));for(var i=t.begin;i<=t.end;i++)a.append(itemTmpl({num:i,active:i===r}));t.end<n&&(a.append(moreItemTmpl()),a.append(itemTmpl({num:n,active:FALSE}))),e.$pagerWrap.append(a),e.curPageRange=t},destroy:function(){var e=this;e.$el.remove()}});module.exports=StandardPagination});