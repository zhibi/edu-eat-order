;/*!waimai:static/plugin/json-2.3.js*/
this.JSON||(this.JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,f,o,u,i=gap,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(o=a.length,n=0;o>n;n+=1)u[n]=str(n,a)||"null";return f=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,f}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)r=rep[n],"string"==typeof r&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));else for(r in a)Object.hasOwnProperty.call(a,r)&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));return f=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,f}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,f=t[e];if(f&&"object"==typeof f)for(n in f)Object.hasOwnProperty.call(f,n)&&(r=walk(f,n),void 0!==r?f[n]=r:delete f[n]);return reviver.call(t,e,f)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),$.toJSON=JSON.stringify,$.evalJSON=JSON.parse}();
;/*!waimai:static/utils/AddressDataCenter.js*/
define("waimai:static/utils/AddressDataCenter",function(t,n,e){function r(t){for(;t&&t.length>_;)t.pop();return t}function i(t,n){return t&&n&&a(t)===a(n)}function a(t){var n="";for(var e in t)t.hasOwnProperty(e)&&"shopnum"!=e&&"city_id"!=e&&(n+=t[e]);return n}function o(t){for(var n=!0,e=0,r=l.length;r>e;e++)"address"!=l[e]&&(n=n&&t[l[e]]);return n}var s,u=t("wcommon:static/util/Cookie"),d=(t("wcommon:static/util"),864e5),c=(new Date).getTime(),_=5,l=["name","lat","lng","address","shopnum","city_id"];s={COOKIE_ADDR_KEY:"wm_search_addr",COOKIE_ADDR_EXPIRES:c+365*d,DEFAULT_PATH:"/"},e.exports={add:function(t){if(o(t)){var n,e={},a=[],d=this.getAll();e.name=encodeURIComponent(t.name),e.address=encodeURIComponent(t.address),e.lat=t.lat,e.lng=t.lng,e.shopnum=t.shopnum,e.city_id=t.city_id,e.uid=t.uid;for(var c=0,_=d.length;_>c;c++){var l=d[c];i(l,e)&&d.splice(c,1)}d.unshift(e),a=r(d),n=JSON.stringify(a),u.setRaw(s.COOKIE_ADDR_KEY,n,{expires:s.COOKIE_ADDR_EXPIRES,path:s.DEFAULT_PATH})}},getAll:function(){var t=u.getRaw(s.COOKIE_ADDR_KEY);return t?JSON.parse(t):[]},clearAll:function(){return u.setRaw(s.COOKIE_ADDR_KEY,[],{expires:c,path:s.DEFAULT_PATH}),!0}}});
;/*!waimai:static/utils/store.js*/
define("waimai:static/utils/store",function(e,t,n){!function(){function e(){try{return l in u&&u[l]}catch(e){return!1}}function t(){try{return f in u&&u[f]&&u[f][u.location.hostname]}catch(e){return!1}}function r(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(o),s.appendChild(o),o.addBehavior("#default#userData"),o.load(l);var n=e.apply(a,t);return s.removeChild(o),n}}function i(e){return e.replace(g,"___")}var o,a={},u=window,c=u.document,l="localStorage",f="globalStorage",d="__storejs__";if(a.disabled=!1,a.set=function(){},a.get=function(){},a.remove=function(){},a.clear=function(){},a.transact=function(e,t,n){var r=a.get(e);null==n&&(n=t,t=null),"undefined"==typeof r&&(r=t||{}),n(r),a.set(e,r)},a.getAll=function(){},a.serialize=function(e){return JSON.stringify(e)},a.deserialize=function(e){return"string"!=typeof e?void 0:JSON.parse(e)},e())o=u[l],a.set=function(e,t){return void 0===t?a.remove(e):void o.setItem(e,a.serialize(t))},a.get=function(e){return a.deserialize(o.getItem(e))},a.remove=function(e){o.removeItem(e)},a.clear=function(){o.clear()},a.getAll=function(){for(var e={},t=0;t<o.length;++t){var n=o.key(t);e[n]=a.get(n)}return e};else if(t())o=u[f][u.location.hostname],a.set=function(e,t){return void 0===t?a.remove(e):void(o[e]=a.serialize(t))},a.get=function(e){return a.deserialize(o[e]&&o[e].value)},a.remove=function(e){delete o[e]},a.clear=function(){for(var e in o)delete o[e]},a.getAll=function(){for(var e={},t=0;t<o.length;++t){var n=o.key(t);e[n]=a.get(n)}return e};else if(c.documentElement.addBehavior){var s,v;try{v=new ActiveXObject("htmlfile"),v.open(),v.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),v.close(),s=v.w.frames[0].document,o=s.createElement("div")}catch(m){o=c.createElement("div"),s=c.body}var g=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");a.set=r(function(e,t,n){return t=i(t),void 0===n?a.remove(t):(e.setAttribute(t,a.serialize(n)),void e.save(l))}),a.get=r(function(e,t){return t=i(t),a.deserialize(e.getAttribute(t))}),a.remove=r(function(e,t){t=i(t),e.removeAttribute(t),e.save(l)}),a.clear=r(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(l)}),a.getAll=r(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var n,r={},i=0;n=t[i];++i)r[n]=a.get(n);return r})}try{a.set(d,d),a.get(d)!=d&&(a.disabled=!0),a.remove(d)}catch(m){a.disabled=!0}a.enabled=!a.disabled,"undefined"!=typeof n&&"function"!=typeof n?n.exports=a:"function"==typeof define&&define.amd?define(a):this.store=a}()});
;/*!waimai:static/utils/superTip.js*/
define("waimai:static/utils/superTip",function(t,o,e){!function(){var t=8,i={hostSelector:"",autoOpen:!0,autoClose:!1,showTime:1e3,msg:"I'm a tip!",borderRadius:5,position:{my:"bottom center",at:"top center"},offset:{x:0,y:0}},p={display:"none","background-color":"rgba(0, 0, 0, 0.7)",position:"absolute","font-size":"12px",color:"#fff","line-height":"1.4","z-index":"1000"},n={},r={},s=function(t){return t+(new Date).getTime()},l=function(){var t={};return{set:function(o,e){if("function"==typeof o&&e&&"number"==typeof e){var i=s("sto_");t[i]=setTimeout(function(){o(),clearTimeout(i)},e)}}}}(),f=["top left","top right","top center","right top","right bottom","right middle","bottom left","bottom right","bottom center","left top","left bottom","left middle"],h=function(o,e,i,p,n){var r=e&&e.at,s=e&&e.my;-1==$.inArray(r,f)&&(r=f[0]),-1==$.inArray(s,f)&&(s=f[0]);var l,h=r.split(" ")[0],a=r.split(" ")[1],m=s.split(" ")[0],x=(s.split(" ")[1],t),d=o.offset(),c=d.left,u=d.top,g=o.outerWidth(),b=o.outerHeight();return"top"==h?"left"==a?"top"==m?l={left:c,top:u+x}:"bottom"==m&&(l={left:c,top:u-p-x}):"right"==a?"top"==m?l={left:c+g-i,top:u+x}:"bottom"==m&&(l={left:c+g-i,top:u-p-x}):"top"==m?l={left:c+g/2-i/2,top:u+x}:"bottom"==m&&(l={left:c+g/2-i/2,top:u-p-x}):"right"==h?"top"==a?"left"==m?l={left:c+g+x,top:u}:"right"==m&&(l={left:c+g-i-x,top:u}):"bottom"==a?"left"==m?l={left:c+g+x,top:u+b-p}:"right"==m&&(l={left:c+g-i-x,top:u+b-p}):"left"==m?l={left:c+g+x,top:u+b/2-p/2}:"right"==m&&(l={left:c+g-i-x,top:u+b/2-p/2}):"bottom"==h?"left"==a?"top"==m?l={left:c,top:u+b+x}:"bottom"==m&&(l={left:c,top:u+b-p-x}):"right"==a?"top"==m?l={left:c+g-i,top:u+b+x}:"bottom"==m&&(l={left:c+g-i,top:u+b-p-x}):"top"==m?l={left:c+g/2-i/2,top:u+b+x}:"bottom"==m&&(l={left:c+g/2-i/2,top:u+b-p-x}):"top"==a?"left"==m?l={left:c+x,top:u}:"right"==m&&(l={left:c-i-x,top:u}):"bottom"==a?"left"==m?l={left:c+x,top:u+b-p}:"right"==m&&(l={left:c-i-x,top:u+b-p}):"left"==m?l={left:c+x,top:u+b/2-p/2}:"right"==m&&(l={left:c-i-x,top:u+b/2-p/2}),l||(l={top:u-p-x,left:c+g/2-i/2}),l.left+=n.x,l.top+=n.y,l.left+="px",l.top+="px",l},a=function(o,e,i){-1==$.inArray(o,f)&&(o=f[0]),e=e||"#333",i=i||0;var p,n,r,s=o.split(" ")[0],l=o.split(" ")[1],h=t;return"top"==s?(p="0 "+h/2+"px "+h+"px "+h/2+"px",n="transparent transparent "+e+" transparent",r="left"==l?{left:i+"px",top:"-"+h+"px"}:"right"==o?{right:i+"px",top:"-"+h+"px"}:{left:"50%",top:"-"+h+"px","margin-left":"-"+h/2+"px"}):"right"==s?(p=h/2+"px 0 "+h/2+"px "+h+"px",n="transparent transparent transparent "+e,r="top"==l?{top:i+"px",right:"-"+h+"px"}:"bottom"==o?{bottom:i+"px",right:"-"+h+"px"}:{top:"50%",right:"-"+h+"px","margin-top":"-"+h/2+"px"}):"bottom"==s?(p=h+"px "+h/2+"px 0 "+h/2+"px",n=e+" transparent transparent transparent",r="left"==l?{left:i+"px",bottom:"-"+h+"px"}:"right"==o?{right:i+"px",bottom:"-"+h+"px"}:{left:"50%",bottom:"-"+h+"px","margin-left":"-"+h/2+"px"}):(p=h/2+"px "+h+"px "+h/2+"px 0",n="transparent "+e+" transparent transparent",r="top"==l?{top:i+"px",left:"-"+h+"px"}:"bottom"==o?{bottom:i+"px",left:"-"+h+"px"}:{top:"50%",left:"-"+h+"px","margin-top":"-"+h/2+"px"}),$.extend({position:"absolute",height:"0",width:"0","border-style":"solid","border-color":n,"border-width":p},r)},m=function(t,o){var t=this.options=$.extend({},i,n,t),o=this.styles=$.extend({},p,r,o,{"border-radius":t.borderRadius+"px"}),e=this.key=s("dcTip"),f=t.position.my,h=t.triangleColor||o["background-color"],m=t.borderRadius,x=a(f,h,m),d=this.elem=$("<div id="+e+"><i></i><div><p>"+t.msg+"</p></div></div>").appendTo("body");if(d.css(o),d.children("i").css(x),d.children("div").css({padding:"5px 15px","max-width":"300px"}),t.autoOpen&&this.show(),t.autoClose&&t.showTime>0){var c=this;l.set(function(){c.hide()},t.showTime)}};m.prototype={constructor:m,position:function(){var t,o=$(this.options.hostSelector);o.length&&o.offset()&&o.filter(":visible")?t=h(o,this.options.position,this.elem.width(),this.elem.height(),this.options.offset):(this.elem.children("i").hide(),t={left:"50%",top:"200px","margin-left":"-"+this.elem.outerWidth()/2+"px"}),this.elem.css(t)},setMsg:function(t){this.elem.find("p").html(t),this.position()},onEvent:function(){var t=this,o=function(){t.position()};$(window).off("resize",o).off("scroll",o).on("resize",o).on("scroll",o)},show:function(){this.elem.show(),this.position(),this.onEvent()},hide:function(){this.remove()},remove:function(){this.elem.remove()}},o=e.exports={create:function(t,o){return new m(t,o)},gSetStyles:function(t){$.extend(r,t)},gSetOptions:function(t){$.extend(n,t)}}}()});
;/*!waimai:static/utils/CartDataCenter.js*/
define("waimai:static/utils/CartDataCenter",function(t,e,i){function r(t){return(Math.round(100*t)/100).toFixed(2)}function o(t,e){_value=encodeURIComponent(e),S.setRaw("s"+t+"s",_value,{path:"/"}),F.set("s"+t+"s",e)}function n(t){return F.get("s"+t+"s")||S.get("s"+t+"s")}function a(t,e,i,r,o){var n=k,a="activity_dishid_arr"+n,s=(F.get(a)||decodeURIComponent(S.get(a))||"").split(","),u=$.inArray(t,s)>-1;if(-1!==$.inArray("null",s)&&s.splice($.inArray("null",s),1),e){if(u){var m=$.inArray(t,s);s.splice(m,1),S.setRaw(a,encodeURIComponent(s.join(",")),{path:"/"}),F.set(a,s.join(","))}}else{if(i)return s.splice(0,s.length),S.setRaw(a,encodeURIComponent(s.join(",")),{path:"/"}),void F.set(a,s.join(","));if(u){if(o)return"isin"}else{if(o)return"notin";s.push(t),S.setRaw(a,encodeURIComponent(s.join(",")),{path:"/"}),F.set(a,s.join(","))}}}function s(t){a(t,!0)}function u(t){"1"===t.dishactflag?a(t.itemId):s(t.itemId)}function m(){a(null,!1,!0)}function c(t){var e=_.shopItem,i={total:0,actTotal:0,dishes:{}};return t&&$.each(e,function(e,r){r.dishactid==t&&(i.dishes[r.itemId]=parseInt(r.activitynum||0),i.total+=parseInt(r.itemCount||0),i.actTotal+=parseInt(r.activitynum||0))}),i}function d(t,e){var i=t.elem,r=t.itemId,o=t.orderlimit,n=t.dishlimit,s=1*t.itemCount;if("1"===t.dishactflag){var u=c(t.dishactid),m=(a(r,!1,!1,o,!0),$("[data-sid=item_"+r+"]")),d=1*m.attr("leftnum");if("minus"==e)return void(t.activitynum=u.dishes[r]>s?s:u.dishes[r]||0);if(t.activitynum=u.dishes[r]>=s?s-1:u.dishes[r]||0,u.actTotal>=o)return N.create({hostSelector:i,autoClose:!0,showTime:3e3,borderRadius:2,msg:"每单只能有"+o+"个菜品享受活动优惠，已超出限额~",position:{at:"top center",my:"bottom center"}},{width:"176px","text-align":"center"}),"beyond_orderlimit";if(s>=d+1)return N.create({hostSelector:i,autoClose:!0,showTime:3e3,borderRadius:2,msg:"超出活动库存，按原价计算~",position:{at:"top center",my:"bottom center"}},{width:"176px","text-align":"center"}),"beyond_leftnum";if(s>+n){var p="";return p=0==n?"您今天可享受的特价优惠份数已用完～":"前"+n+"份可享受特价优惠<br />您已超出限额～",N.create({hostSelector:i,autoClose:!0,showTime:3e3,borderRadius:2,msg:p,position:{at:"top center",my:"bottom center"}},{width:"176px","text-align":"center","z-index":"1000"}),"beyond_dishlimit"}var h=o-u.actTotal,l=s-t.activitynum;return t.activitynum+=Math.min(h,l),"can_add_act"}}function p(t){return a(t,!1,!1,null,!0)}function h(t){f(n(t));S.remove("s"+t+"s"),F.remove("s"+t+"s"),F.clear()}function l(t){var e,i=[];return $.each(t.shopItem,function(t,e){i.push([e.itemId,e.itemCount,e.itemName,e.itemPrice,e.packCount,e.packPrice,e.minOrderNumber,e.itemStock,e.itemDishType,e.itemStockId,e.orderlimit,e.dishlimit,e.dishactflag,e.activitynum,e.category_id,e.require_category_id,e.uniqId,e.dishactid].join(T.item))}),e=[t.shopName,t.shopId,t.deliveryFee,t.takeOutPrice,i.join(T.itemToItem)].join(T.shopToItem)}function f(t){if(!t)return{shopName:"",shopId:"",deliveryFee:0,takeOutPrice:0,shopItem:[]};var e=t.split(T.shopToItem),i={};return e.length>=1&&(i.shopName=e[0]),e.length>=2&&(i.shopId=e[1]+""),e.length>=3&&(i.deliveryFee=e[2]),e.length>=4&&(i.takeOutPrice=e[3]),i.shopItem=[],e.length>=5&&(e=e[4])&&(e=e.split(T.itemToItem),$.each(e,function(t,e){var r=e.split(T.item);if(r[0]&&2==r[8]){var o=F.get("s"+r[0]+"s");if(!o)return}i.shopItem.push({itemId:r[0],itemCount:parseInt(r[1]),itemName:r[2],itemPrice:r[3],packCount:r[4],packPrice:r[5],minOrderNumber:r[6],itemStock:parseInt(r[7]),itemDishType:r[8],itemStockId:r[9],orderlimit:r[10],dishlimit:r[11],dishactflag:r[12],activitynum:r[13],category_id:r[14],require_category_id:r[15],uniqId:r[16],dishactid:r[17]})})),i}function I(){o(k,l(_))}function g(){_=f(n(k)),_.shopId=k}function y(t,i,r,o){var n=0,a=!1;for(o=parseInt(o),r=parseInt(r),itemIdex=0,len=_.shopItem.length;len>itemIdex;itemIdex++)_.shopItem[itemIdex].itemStockId==i&&(_.shopItem[itemIdex].itemId==t?(n+=r,a=!0):n+=_.shopItem[itemIdex].itemCount);return a||(n+=r),n>=o?$(e).trigger("features.stockTight",{sid:i,num:o}):o>n&&$(e).trigger("features.stockNormal",i),n>o?r+o-n:r}function v(t,e,i){if(i){var r={product_id:i.itemId,product_quantity:e,feature_id:[]};for(var o in i.select)"规格"!=o?r.feature_id.push(i.select[o].id):r.product_id=i.select[o].id;return $.extend({},r)}}function C(t,e,i){if(i){var r,o,n,a={product_id:i.basic.id,product_quantity:e,groupons:[]};for(var s in i.data)if(i.data[s].total&&i.data[s].total.count){r={dish_group_id:s,ids:[]};for(var u in i.data[s])if("total"!=u&&(n=i.data[s][u],n.count)){if(n.features&&n.features.length){var m=$.extend([],n.features);n.realId?(m.splice($.inArray(n.realId,m),1),o={product_id:n.realId,product_quantity:n.count,feature_id:m}):o={product_id:u,product_quantity:n.count,feature_id:m}}else o={product_id:u,product_quantity:n.count};r.ids.push($.extend({},o))}a.groupons.push($.extend({},r))}return $.extend({},a)}}var e,_,k,S=t("wcommon:static/util/Cookie"),T=(t("wcommon:static/util"),{shopToItem:"##",itemToItem:"$$",item:"^^"}),x=t("waimai:widget/common/ui/cartAlert/cartAlert"),F=t("waimai:static/utils/store"),N=t("waimai:static/utils/superTip"),P={url:"/waimai/trade/getorderprice",timer:null,delay:200,recount:3,restore:function(){$(e).trigger("failpremium.shopCar")},retry:function(t){var i=this;t=t||0,t<i.recount?(clearTimeout(i.timer),i.timer=setTimeout(function(){$.ajax({url:i.url,data:i.params,type:"post",dataType:"json",success:function(t){if(0==t.error_no){var r=t.result.order_info,o=t.result.discount_info;$(e).trigger("premium.shopCar",{prices:r,discounts:o})}else t.error_no?(t.error_msg||(t.error_msg="餐厅太忙，暂时不能接单"),x.alert(t),i.restore()):i.restore()},error:function(){i.retry(++t)}})},i.delay)):i.restore()},get:function(t){var e=this;e.params=t,e.retry()},JSONStringify:function(t){return JSON.stringify(t)},adaptParam:function(t,e){var i=this,r=[];for(var o in e){var n=e[o].itemId,a=e[o].itemCount,s=e[o].dishactflag;if(!e[o].itemDishType||2!=e[o].itemDishType&&"attr"!=e[o].itemDishType)r.push("1"===s?{product_id:n,product_quantity:a,dish_activity:s,activity_num:e[o].activitynum}:{product_id:n,product_quantity:a});else{var u=F.get("s"+n+"s")||JSON.parse(S.get("s"+n+"s"));r.push(2==e[o].itemDishType?C(n,a,u):v(n,a,u))}}return{shop_id:t,products:i.JSONStringify(r)}}};e=i.exports={fetchPremium:function(){var t=P.adaptParam(this.getCurShopId(),this.getCarItems());P.get(t)},getCarInfo:function(t){var e=n(t);if(!e)return!1;var i=f(e).shopItem;return i},fetchItems:function(){return P.adaptParam(this.getCurShopId(),this.getCarItems())},setCarItem:function(t){var i,o;for(t.itemPrice&&(t.itemPrice=r(t.itemPrice)),o=0,len=_.shopItem.length;len>o;o++)if(_.shopItem[o].itemId==t.itemId){i=_.shopItem[o];break}t.itemCount=parseInt(t.itemCount,10),"append"==t.type&&i&&(t.itemCount+=i.itemCount||0),i&&i.itemCount>t.itemCount?d(t,"minus"):d(t,"add");try{if(t.selectFeatures||i&&"attr"==i.itemDishType){if(t=$.extend(i||{},t),t.itemStockId=t.itemStockId||t.selectFeatures.itemId,t.itemCount=y(t.itemId,t.itemStockId,t.itemCount,t.itemStock),t.itemCount<0)return;t.selectFeatures&&F.set("s"+t.itemId+"s",t.selectFeatures)}}catch(n){}if(("2"==t.itemDishType||i&&"2"==i.itemDishType)&&(t=$.extend(i||{},t),t.itemStockId=t.itemStockId||t.orignItemId,t.itemCount=y(t.itemId,t.itemStockId,t.itemCount,t.itemStock)),i)if($.extend(i,t),i.itemCount<i.minOrderNumber){if(_.shopItem.splice(o,1),$(e).trigger("delete.shopCar",i),2==i.itemDishType||i.selectFeatures){var a=new Date;a.setFullYear(a.getFullYear()-1),F.remove("s"+i.itemId+"s")}}else i.itemCount>=i.itemStock&&(i.itemCount=i.itemStock),i.activitynum>i.itemCount&&(i.activitynum=i.itemCount),$(e).trigger("update.shopCar",i);else{if(!t.itemName)return;if(!t.itemStock||!t.itemCount)return;if(parseInt(t.itemStock)<parseInt(t.minOrderNumber))return void s(t.itemId);t.itemCount<t.minOrderNumber&&(t.itemCount=t.minOrderNumber),t.itemCount>t.itemStock&&(t.itemCount=t.itemStock),_.shopItem.push(t),$(e).trigger("add.shopCar",t)}m(),$.each(_.shopItem,function(){u(this)}),0==_.shopItem.length&&$(e).trigger("clear.shopCar"),I()},setCurShopInfo:function(t,e,i,r){_||(_={}),_.shopId=t||_.shopId,_.shopName=e||_.shopName,_.deliveryFee=i||_.deliveryFee,_.takeOutPrice=r||_.takeOutPrice,I()},getCurShopName:function(){return _.shopName},getCurShopId:function(){return _.shopId},getCarItems:function(){return _.shopItem},clearCar:function(t){m(),_.shopItem=[],I(),!t&&$(e).trigger("clear.shopCar")},init:function(t){k=t+"",m(),g(),$.each(_.shopItem,function(){u(this)}),$(e).trigger("inited.shopCar",_)},getAmount:function(){var t=0,e=0;return $.each(_.shopItem,function(i,r){e+=r.packCount*r.packPrice*r.itemCount,t+=r.itemCount*r.itemPrice}),{deliveryFee:r(_.deliveryFee),packFee:r(e),productAmount:r(t),amount:r(t+e+parseFloat(_.deliveryFee)),takeOutPrice:r(_.takeOutPrice),cha:r(_.takeOutPrice-t-e),isEmpty:0==_.shopItem.length}},isEmpty:function(){return _&&_.shopItem.length>0?!1:!0},resetCar:function(t){_.shopItem=t,I()},adaptSetMealForServer:C,adaptFeatureForServer:v,clearData:h,checkActdish:d,justCheckActdish:p}});
;/*!waimai:static/utils/convertMC2LL.js*/
define("waimai:static/utils/convertMC2LL",function(e,t,a){!function(){function e(e,t){if(e&&t){var a=t[0]+t[1]*Math.abs(e.lng),n=Math.abs(e.lat/t[9]),r=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n+n;return a*=e.lng<0?-1:1,r*=e.lat<0?-1:1,[a,r]}}var t=function(t){for(var a,n=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],r=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],i=[Math.abs(t.lng),Math.abs(t.lat)],o=n.length,u=0;o>u;u++)if(i[1]>=n[u]){a=r[u];break}var f=e(t,a),l=new Number(f[0]).toFixed(6),b=new Number(f[1]).toFixed(6);return[l,b]};a.exports=t}()});
;/*!waimai:static/utils/CookieDataCenter.js*/
define("waimai:static/utils/CookieDataCenter",function(t,e,n){var i,o=t("wcommon:static/util/Cookie"),C=t("wcommon:static/util"),E=864e5,a=(new Date).getTime();i={COOKIE_CITY_KEY:"wm_city",COOKIE_CITY_EXPIRES:a+5e3*E,COOKIE_ADDR_KEY:"wm_addr",COOKIE_ADDR_EXPIRES:a+7*E,DEFAULT_CITY:{code:131,name:"北京"},CITY_SUPPORT:{131:1,289:1,179:1,315:1,224:1},DEFAULT_PATH:"/"},n.exports={initCity:function(){var t=this.getCity(i.COOKIE_CITY_KEY);t&&t.code||this.setCity(i.DEFAULT_CITY)},setCity:function(t){if(t&&t.name){var e=encodeURIComponent(JSON.stringify(t));o.setRaw(i.COOKIE_CITY_KEY,e,{expires:i.COOKIE_CITY_EXPIRES,path:i.DEFAULT_PATH})}},getCity:function(){var t=decodeURIComponent(o.getRaw(i.COOKIE_CITY_KEY)),e=JSON.parse(t);return this.isEmpty(e)?i.DEFAULT_CITY:e},setAddr:function(t){if(t.address){var e={};e.address=C.encodeHTML(decodeURIComponent(t.address)),e.lat=t.lat,e.lng=t.lng;var n=encodeURIComponent(JSON.stringify(e));o.setRaw(i.COOKIE_ADDR_KEY,n,{expires:i.COOKIE_ADDR_EXPIRES,path:i.DEFAULT_PATH})}},getAddr:function(){var t=decodeURIComponent(o.getRaw(i.COOKIE_ADDR_KEY));return JSON.parse(t)},isEmpty:function(t){for(var e in t)return!1;return!0}}});
;/*!waimai:static/utils/fingerprint.js*/
define("waimai:static/utils/fingerprint",function(e,t,n){!function(e,t,i){"undefined"!=typeof n&&n.exports?n.exports=i():"function"==typeof define&&define.amd?define(i):t[e]=i()}("Fingerprint",this,function(){"use strict";var e=function(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,i){if(null!==e)if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===+e.length){for(var r=0,a=e.length;a>r;r++)if(n.call(i,e[r],r,e)==={})return}else for(var o in e)if(e.hasOwnProperty(o)&&n.call(i,e[o],o,e)==={})return},this.map=function(e,t,i){var r=[];return null==e?r:n&&e.map===n?e.map(t,i):(this.each(e,function(e,n,a){r[r.length]=t.call(i,e,n,a)}),r)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.screen_orientation=e.screen_orientation,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};return e.prototype={get:function(){var e=[];if(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution){var t=this.getScreenResolution();"undefined"!=typeof t&&e.push(this.getScreenResolution().join("x"))}return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),e.push(document.body?typeof document.body.addBehavior:"undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},getKey:function(){var e={};e.language=navigator.language,e.colorDepth=screen.colorDepth;var t=this.getScreenResolution();return e.screen_resolution="undefined"!=typeof t?this.getScreenResolution().join("x"):"",e.timezone=(new Date).getTimezoneOffset(),e.openDatabase=typeof window.openDatabase,e.sessionStorage=this.hasSessionStorage(),e.localStorage=this.hasLocalStorage(),e.indexedDB=!!window.indexedDB,e.addBehavior=document.body?typeof document.body.addBehavior:"",e.cpuClass=navigator.cpuClass,e.platform=navigator.platform,e.doNotTrack=navigator.doNotTrack,e.plugins=this.murmurhash3_32_gc(this.getPluginsString(),31),this.canvas&&this.isCanvasSupported()&&(e.canvas=this.murmurhash3_32_gc(this.getCanvasFingerprint(),31)),e},murmurhash3_32_gc:function(e,t){var n,i,r,a,o,s,c,h;for(n=3&e.length,i=e.length-n,r=t,o=3432918353,s=461845907,h=0;i>h;)c=255&e.charCodeAt(h)|(255&e.charCodeAt(++h))<<8|(255&e.charCodeAt(++h))<<16|(255&e.charCodeAt(++h))<<24,++h,c=(65535&c)*o+(((c>>>16)*o&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c,r=r<<13|r>>>19,a=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&a)+27492+(((a>>>16)+58964&65535)<<16);switch(c=0,n){case 3:c^=(255&e.charCodeAt(h+2))<<16;case 2:c^=(255&e.charCodeAt(h+1))<<8;case 1:c^=255&e.charCodeAt(h),c=(65535&c)*o+(((c>>>16)*o&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c}return r^=e.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,r>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?!0:!1},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var e=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(e,function(e){try{return new ActiveXObject(e),e}catch(t){return null}}).join(";")}return""},getScreenResolution:function(){var e;return e=this.screen_orientation?screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height]:[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="http://www.baidu.com";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}},e})});
;/*!waimai:static/utils/GlobalErrorMonitor.js*/
define("waimai:static/utils/GlobalErrorMonitor",function(r,e,i){function n(r){var e,i={};if("object"==typeof r){if(i.ua=window.navigator.userAgent,i.page_url=window.location.href,e=r.stack)i.stack=e;else for(var n in r)r.hasOwnProperty(n)&&"string"==typeof r[n]&&(i[n]=r[n]);(new Image).src=o+encodeURIComponent(JSON.stringify(i))}}var o="/waimai?qt=feerror&msg=";i.exports={error:function(r,e,i){if(1===arguments.length)return void n(r);if(e){var o={};o.message=r,o.url=e,o.line=i,n(o)}}}});
;/*!waimai:static/utils/GlobalTips.js*/
define("waimai:static/utils/GlobalTips",function(t,o,i){function e(){c&&clearTimeout(c),l.fixTo("#content","top",{top:0}),l.hide()}function n(t){var o=$(window).scrollTop(),i=o>f?o-f+SELF_HEIGHT+20:SELF_HEIGHT+1,e={top:i};"top"===t?e={top:o}:"offTop"===t&&(e={top:i+SELF_HEIGHT}),l.show(),l.fixTo("#content","top",e)}var s,l,p,c,a=3e3,f=82;SELF_HEIGHT=45,s=t("jsmod/ui/fixElement"),l=new s('<div class="global-tips"><span class="gt-msg"></span></div>',{targetType:"top",zIndex:3e3,preventShow:!0}),p=l.getElement(),$(window).on("scroll.globaltips",function(){e()}),$(".global-tips .close-btn").on("click",function(){e()}),i.exports={tip:function(t,o){c&&clearTimeout(c),p.find(".gt-msg").html(t),l.redraw(),n(o),c=setTimeout(function(){e()},a)},topTip:function(t,o){o?p.addClass("reverse"):p.removeClass("reverse"),this.tip(t,"top")},hide:function(){e()}}});
;/*!waimai:static/utils/LocalDataCenter.js*/
define("waimai:static/utils/LocalDataCenter",function(t,e,i){var a=t("waimai:static/utils/store"),n=t("wcommon:static/util");i.exports={eLength:5,schema:["address","lat","lng"],key:"LocalDataCenter",add:function(t){var e=this,i=a.get(e.key)||[];if(e._validate(t)){t.address=encodeURIComponent(n.encodeHTML(decodeURIComponent(t.address)));for(var r in i){var s=i[r];if(e._equal(t,s))return}i.unshift(t),i=e._cut(i),a.set(e.key,i)}},getAll:function(){return this._cut(a.get(this.key))},_validate:function(t){var e=!0;for(var i in this.schema)e=e&&t[this.schema[i]];return e},_cut:function(t){for(;t&&t.length>this.eLength;)t.pop();return t},_equal:function(t,e){return t&&e&&this._serialize(t)===this._serialize(e)},_serialize:function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=t[i]);return e}}});
;/*!waimai:static/utils/oop-base/aspect/aspect.js*/
define("waimai:static/utils/oop-base/aspect/aspect",function(t,r,i){function e(t,r,i,e){for(var o,c,f=r.split(n);o=f.shift();)c=s(this,o),c.__isAspected||a.call(this,o),this.on(t+":"+o,i,e);return this}function s(t,r){var i=t[r];if(!i)throw new Error("Invalid method name: "+r);return i}function a(t){var r=this[t];this[t]=function(){var i=Array.prototype.slice.call(arguments),e=["before:"+t].concat(i);if(this.trigger.apply(this,e)!==!1){var s=r.apply(this,arguments),a=["after:"+t,s].concat(i);return this.trigger.apply(this,a),s}},this[t].__isAspected=!0}i.exports={before:function(t,r,i){return e.call(this,"before",t,r,i)},after:function(t,r,i){return e.call(this,"after",t,r,i)}};var n=/\s+/});
;/*!waimai:static/utils/oop-base/attribute/attribute.js*/
define("waimai:static/utils/oop-base/attribute/attribute",function(t,r){function e(t){return"[object String]"===w.call(t)}function n(t){return"[object Function]"===w.call(t)}function i(t){return null!=t&&t==t.window}function a(t){if(!t||"[object Object]"!==w.call(t)||t.nodeType||i(t))return!1;try{if(t.constructor&&!A.call(t,"constructor")&&!A.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}var e;if(j)for(e in t)return A.call(t,e);for(e in t);return void 0===e||A.call(t,e)}function o(t){if(!t||"[object Object]"!==w.call(t)||t.nodeType||i(t)||!t.hasOwnProperty)return!1;for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}function c(t,r){var e;for(e in r)r.hasOwnProperty(e)&&(t[e]=u(r[e],t[e]));return t}function u(t,r){return P(t)?t=t.slice():a(t)&&(a(r)||(r={}),t=c(r,t)),t}function s(t,r,e){for(var n=[],i=r.constructor.prototype;i;)i.hasOwnProperty("attrs")||(i.attrs={}),l(e,i.attrs,i),o(i.attrs)||n.unshift(i.attrs),i=i.constructor.superclass;for(var a=0,c=n.length;c>a;a++)y(t,p(n[a]))}function f(t,r){y(t,p(r,!0),!0)}function l(t,r,e,n){for(var i=0,a=t.length;a>i;i++){var o=t[i];e.hasOwnProperty(o)&&(r[o]=n?r.get(o):e[o])}}function h(t,r){for(var e in r)if(r.hasOwnProperty(e)){var i,a=r[e].value;n(a)&&(i=e.match(m))&&(t[i[1]](v(i[2]),a),delete r[e])}}function v(t){var r=t.match(S),e=r[1]?"change:":"";return e+=r[2].toLowerCase()+r[3]}function g(t,r,e){var n={silent:!0};t.__initializingAttrs=!0;for(var i in e)e.hasOwnProperty(i)&&r[i].setter&&t.set(i,e[i],n);delete t.__initializingAttrs}function p(t,r){var e={};for(var n in t){var i=t[n];e[n]=!r&&a(i)&&b(i,x)?i:{value:i}}return e}function y(t,r,e){var n,i,a;for(n in r)if(r.hasOwnProperty(n)){if(i=r[n],a=t[n],a||(a=t[n]={}),void 0!==i.value&&(a.value=u(i.value,a.value)),e)continue;for(var o in C){var c=C[o];void 0!==i[c]&&(a[c]=i[c])}}return t}function b(t,r){for(var e=0,n=r.length;n>e;e++)if(t.hasOwnProperty(r[e]))return!0;return!1}function O(t){return null==t||(e(t)||P(t))&&0===t.length||o(t)}function d(t,r){if(t===r)return!0;if(O(t)&&O(r))return!0;var e=w.call(t);if(e!=w.call(r))return!1;switch(e){case"[object String]":return t==String(r);case"[object Number]":return t!=+t?r!=+r:0==t?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase;case"[object Array]":var n=t.toString(),i=r.toString();return-1===n.indexOf("[object")&&-1===i.indexOf("[object")&&n===i}if("object"!=typeof t||"object"!=typeof r)return!1;if(a(t)&&a(r)){if(!d(_(t),_(r)))return!1;for(var o in t)if(t[o]!==r[o])return!1;return!0}return!1}r.initAttrs=function(t){var r=this.attrs={},e=this.propsInAttrs||[];s(r,this,e),t&&f(r,t),g(this,r,t),h(this,r),l(e,this,r,!0)},r.get=function(t){var r=this.attrs[t]||{},e=r.value;return r.getter?r.getter.call(this,e,t):e},r.set=function(t,r,n){var i={};e(t)?i[t]=r:(i=t,n=r),n||(n={});var o=n.silent,u=n.override,s=this.attrs,f=this.__changedAttrs||(this.__changedAttrs={});for(t in i)if(i.hasOwnProperty(t)){var l=s[t]||(s[t]={});if(r=i[t],l.readOnly)throw new Error("This attribute is readOnly: "+t);l.setter&&(r=l.setter.call(this,r,t));var h=this.get(t);!u&&a(h)&&a(r)&&(r=c(c({},h),r)),s[t].value=r,this.__initializingAttrs||d(h,r)||(o?f[t]=[r,h]:this.trigger("change:"+t,r,h,t))}return this},r.change=function(){var t=this.__changedAttrs;if(t){for(var r in t)if(t.hasOwnProperty(r)){var e=t[r];this.trigger("change:"+r,e[0],e[1],r)}delete this.__changedAttrs}return this},r._isPlainObject=a;var j,w=Object.prototype.toString,A=Object.prototype.hasOwnProperty;!function(){function t(){this.x=1}var r=[];t.prototype={valueOf:1,y:1};for(var e in new t)r.push(e);j="x"!==r[0]}();var P=Array.isArray||function(t){return"[object Array]"===w.call(t)},_=Object.keys;_||(_=function(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r});var m=/^(on|before|after)([A-Z].*)$/,S=/^(Change)?([A-Z])(.*)/,x=["value","getter","setter","readOnly"],C=["setter","getter","readOnly"]});
;/*!waimai:static/utils/oop-base/class/class.js*/
define("waimai:static/utils/oop-base/class/class",function(t,n,r){function o(t){return this instanceof o||!f(t)?void 0:e(t)}function i(t){var n,r;for(n in t)r=t[n],o.Mutators.hasOwnProperty(n)?o.Mutators[n].call(this,r):this.prototype[n]=r}function e(t){return t.extend=o.extend,t.implement=i,t}function s(){}function c(t,n,r){for(var o in n)if(n.hasOwnProperty(o)){if(r&&-1===l(r,o))continue;"prototype"!==o&&(t[o]=n[o])}}r.exports=o,o.create=function(t,n){function r(){t.apply(this,arguments),this.constructor===r&&this.initialize&&this.initialize.apply(this,arguments)}return f(t)||(n=t,t=null),n||(n={}),t||(t=n.Extends||o),n.Extends=t,t!==o&&c(r,t,t.StaticsWhiteList),i.call(r,n),e(r)},o.extend=function(t){return t||(t={}),t.Extends=this,o.create(t)},o.Mutators={Extends:function(t){var n=this.prototype,r=u(t.prototype);c(r,n),r.constructor=this,this.prototype=r,this.superclass=t.prototype},Implements:function(t){p(t)||(t=[t]);for(var n,r=this.prototype;n=t.shift();)c(r,n.prototype||n)},Statics:function(t){c(this,t)}};var u=Object.__proto__?function(t){return{__proto__:t}}:function(t){return s.prototype=t,new s},a=Object.prototype.toString,p=Array.isArray||function(t){return"[object Array]"===a.call(t)},f=function(t){return"[object Function]"===a.call(t)},l=Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){for(var r=0,o=t.length;o>r;r++)if(t[r]===n)return r;return-1}});
;/*!waimai:static/utils/oop-base/events/events.js*/
define("waimai:static/utils/oop-base/events/events",function(t,e,r){function n(){}function o(t,e,r){var n=!0;if(t){var o=0,i=t.length,s=e[0],a=e[1],f=e[2];switch(e.length){case 0:for(;i>o;o+=2)n=t[o].call(t[o+1]||r)!==!1&&n;break;case 1:for(;i>o;o+=2)n=t[o].call(t[o+1]||r,s)!==!1&&n;break;case 2:for(;i>o;o+=2)n=t[o].call(t[o+1]||r,s,a)!==!1&&n;break;case 3:for(;i>o;o+=2)n=t[o].call(t[o+1]||r,s,a,f)!==!1&&n;break;default:for(;i>o;o+=2)n=t[o].apply(t[o+1]||r,e)!==!1&&n}}return n}function i(t){return"[object Function]"===Object.prototype.toString.call(t)}var s=/\s+/;n.prototype.on=function(t,e,r){var n,o,i;if(!e)return this;for(n=this.__events||(this.__events={}),t=t.split(s);o=t.shift();)i=n[o]||(n[o]=[]),i.push(e,r);return this},n.prototype.once=function(t,e,r){var n=this,o=function(){n.off(t,o),e.apply(r||n,arguments)};return this.on(t,o,r)},n.prototype.off=function(t,e,r){var n,o,i,f;if(!(n=this.__events))return this;if(!(t||e||r))return delete this.__events,this;for(t=t?t.split(s):a(n);o=t.shift();)if(i=n[o])if(e||r)for(f=i.length-2;f>=0;f-=2)e&&i[f]!==e||r&&i[f+1]!==r||i.splice(f,2);else delete n[o];return this},n.prototype.trigger=function(t){var e,r,n,i,a,f,c=[],p=!0;if(!(e=this.__events))return this;for(t=t.split(s),a=1,f=arguments.length;f>a;a++)c[a-1]=arguments[a];for(;r=t.shift();)(n=e.all)&&(n=n.slice()),(i=e[r])&&(i=i.slice()),"all"!==r&&(p=o(i,c,this)&&p),p=o(n,[r].concat(c),this)&&p;return p},n.prototype.emit=n.prototype.trigger;var a=Object.keys;a||(a=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),n.mixTo=function(t){function e(e){t[e]=function(){return r[e].apply(s,Array.prototype.slice.call(arguments)),this}}var r=n.prototype;if(i(t)){for(var o in r)r.hasOwnProperty(o)&&(t.prototype[o]=r[o]);Object.keys(r).forEach(function(e){t.prototype[e]=r[e]})}else{var s=new n;for(var o in r)r.hasOwnProperty(o)&&e(o)}},r.exports=n});
;/*!waimai:static/utils/oop-base/base/base.js*/
define("waimai:static/utils/oop-base/base/base",function(t,i,s){function a(t,i){for(var s in i)if(i.hasOwnProperty(s)){var a="_onChange"+e(s);t[a]&&t.on("change:"+s,t[a])}}function e(t){return t.charAt(0).toUpperCase()+t.substring(1)}var n=t("waimai:static/utils/oop-base/class/class"),o=t("waimai:static/utils/oop-base/events/events"),r=t("waimai:static/utils/oop-base/aspect/aspect"),c=t("waimai:static/utils/oop-base/attribute/attribute");s.exports=n.create({Implements:[o,r,c],initialize:function(t){this.initAttrs(t),a(this,this.attrs)},destroy:function(){this.off();for(var t in this)this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}}})});
;/*!waimai:static/utils/SlidePlayer.js*/
define("waimai:static/utils/SlidePlayer",function(t,i,n){var o,a={autoPlay:!0,current:0,duration:3e3,width:"100%",height:"100%",autoAdaptive:!1},e=function(t,i){var n=this;0!=$(t).length&&(n.$el=$(t),n.option=$.extend({},a,i),n.init())};$.extend(e.prototype,{init:function(){var t=this;return t.$el.css({position:"relative",overflow:"hidden"}),t.$imgList=t.$el.find(".slide-container li"),t.$navContainer=t.$el.find(".slide-indicators"),t.imgCount=t.$imgList.size(),t.cur=t.option.current,0==t.imgCount?void t.$el.hide():(t.option.autoAdaptive&&(t.option.height="100%",t.option.width="100%"),t.$imgList.css({position:"relative","float":"left","margin-right":"-100%"}),t.$imgList.find("img").css({height:t.option.height,width:t.option.width}),t.$imgList.hide(),t.$imgList.eq(t.cur).show(),t.imgCount>1&&(t.addNav(),t.$navContainer.find("li").removeClass("active"),t.$navContainer.find("li").eq(t.cur).addClass("active")),void t.handleMouse(t.$imgList))},handleMouse:function(t){var i=this;t.on("mouseenter",function(){clearInterval(o)}),t.on("mouseleave",function(){i.startAutoPlay()})},addNav:function(){for(var t=this,i="",n=0;n<t.imgCount;n++)i+=n==t.cur?"<li class='active'></li>":"<li></li>";t.$navContainer.append(i),t.bindEvent(),t.option.autoPlay&&t.startAutoPlay()},showCur:function(){var t=this;t.$imgList.fadeOut(1e3),t.$imgList.eq(t.cur).fadeIn(1e3),t.$navContainer.find("li").removeClass("active"),t.$navContainer.find("li").eq(t.cur).addClass("active")},autoPlay:function(t){var i=t||this;i.cur>=i.imgCount-1?i.cur=0:i.cur++,i.imgCount>1&&i.showCur()},startAutoPlay:function(){var t=this;o=setInterval(function(){t.autoPlay(t)},t.option.duration)},stopAutoPlay:function(){clearInterval(o)},bindEvent:function(){var t=this;t.option.autoPlay&&t.$navContainer.hover(function(){t.stopAutoPlay()},function(){t.startAutoPlay()}),t.$navContainer.on("click","li",function(i){i.stopPropagation(),i.preventDefault();var n=$(i.currentTarget);n.hasClass("active")||(t.stopAutoPlay(),t.cur=n.index(),t.showCur())})}}),n.exports=e});
;/*!waimai:static/utils/stat.js*/
define("waimai:static/utils/stat",function(t,n,e){function a(t,n,e){return function(){t&&t.apply(e,arguments),n&&n.apply(e,arguments)}}e.exports.addNStat=function(t,n){r.addStat(t,n)},e.exports.init=function(t,n,e,a){r.init(t,n,e,a)},e.exports.open=function(t,n){var e;n=$.extend({},n,stat.opts),stat.opts.page&&stat.opts.da_trd&&"hotel"==stat.opts.da_trd&&!/.*(stat_action_path).*/.test(t)&&(e=util.getParam("stat_action_path")||"",e?e+=","+stat.opts.page:e=stat.opts.page,n.stat_action_path=e),t+=t.indexOf("?")>-1?"&"+$.param(n):"?"+$.param(n),window.open(t)},e.exports.getOption=function(){return $.extend({page:r.pagePre},r.opts)};var i={encode:function(t){var n=[];return $.each(t,function(t,e){n.push(t+"="+encodeURIComponent(e))}),n.join("&")},decode:function(t){if("string"==typeof t)return decodeURIComponent(t);var n=[];return $.each(t,function(t,e){n.push(t+"="+(/%[A-Za-z0-9]{2}/.test(e)?decodeURIComponent(e):e))}),n.join("&")}},r={opts:{resid:61,func:"place",da_ver:"2.1.0"},init:function(){"object"==typeof arguments[0]&&(this.opts=$.extend(this.opts,arguments[0]),this.pagePre=this.opts.page)},addStat:function(t,n,e){try{if(t.nodeType){var a=$(t).attr(s.statArr).split("|");return void this.addStat(a[1],a.length>2?a[2]:$(t).text(),a[0])}var i=$.extend({},this.opts),r=typeof t;"string"==r?(t=t.replace(/[\{\}'"]/g,""),$.each(t.split(","),function(t,n){var e=n.split(":");2==e.length&&(i[$.trim(e[0])]=$.trim(e[1]))})):"object"==r&&$.extend(i,t),e&&(i.da_act=$.trim(e)),i.t=(1e8*Math.random()).toFixed(0),this.pagePre&&(i.da_src=this.pagePre+(i.da_src?"."+i.da_src:"")),this.sendStat(i)}catch(o){}},sendStat:function(t){var n=new Image;n.onload=n.onerror=function(){n=null},n.src="http://map.baidu.com/img/transparent.gif?"+i.encode(t)}},o={items:[],handle:null,addStat:function(t){var n=$(t).attr(s.statArr),e=n.match(/load\|\{?(.*)(da_src:([^,\}]+))(.*)/);e&&e.length>0&&(this.items.push(e[3]),this.send())},stop:function(){this.handle&&clearTimeout(this.handle)},send:function(){this.stop();var t=this;t.items&&t.items.length&&(this.handle=setTimeout(function(){r.addStat({da_src:t.items.join(":"),da_act:"load"}),t.items=[]},2e3))}},s={statArr:"nstat",surpportEvent:["ready","load","click","one","show","showone","hide","hideone","mousedown"],scanBindEvent:["ready","load","click","one","mousedown"],handles:{mergeEvent:{event:["load"],handle:function(t){var n=$(t).attr(s.statArr).split("|");o.addStat(t),n[0]=n[0]+"ed",$(t).attr(s.statArr,n.join("|"))}},customEvent:{event:["ready","showone","hideone"],handle:function(t){var n=$(t).attr(s.statArr).split("|");r.addStat(t),n[0]=n[0]+"ed",$(t).attr(s.statArr,n.join("|"))}},jQueryEvent:{event:["click","one"],handle:function(t){var n=$(t).attr(s.statArr).split("|")[0],e=n+".nstat";$(t).unbind(e).bind(e,function(){r.addStat(t)});var a=$._data($(t)[0],"events")[n],i=a.pop();a.unshift(i)}},statusEvent:{event:["show","hide"],handle:function(t){r.addStat(t)}}},getHandle:function(t){for(var n in this.handles)if($.inArray(t,this.handles[n].event)>-1)return this.handles[n].handle},init:function(t,n){var e=this.statArr,a=this,i=$(t||"body"),r=function(){var t=$(this).attr(e).split("|")[0];(n||$.inArray(t,a.scanBindEvent)>-1)&&$.inArray(t,a.surpportEvent)>-1&&a.getHandle(t)(this)},o=n?"["+e+"^='"+n+"']":"["+e+"]";i.is(o)&&r.apply(i[0]),i.find("["+e+"]").each(r)}},u={fun_proxy:[{fun:["append","prepend","before","after"],proxy:function(t){return function(){return $.each(arguments,function(t,n){var e="string"==typeof n?$.trim(n):n,a=$(e);s.init(a)}),t.apply(this,arguments)}}},{fun:["html","wrapAll"],proxy:function(t){return function(){var n=t.apply(this,arguments);return s.init($(this)),n}}},{fun:["show","hide"],proxy:function(t,n){return function(){var e=t.apply(this,arguments);return s.init($(this),n),e}}},{fun:["attr"],proxy:function(t){return function(){var n=t.apply(this,arguments);return arguments.length>=2&&s.init($(this)),n}}}],$_fun_proxy:[{fun:["ajax"],proxy:function(t){return function(n){return n=n||{},n.beforeSend=a(n.beforeSend,function(){o.stop()},n),n.complete=a(n.complete,function(){o.send()},n),t.apply($,arguments)}}}],init:function(){var t=this;$.each(t.fun_proxy,function(t,n){$.each(n.fun,function(t,e){$.fn[e]=n.proxy($.fn[e],e)})})},__init:function(){var t=this;$.each(t.$_fun_proxy,function(t,n){$.each(n.fun,function(t,e){$[e]=n.proxy($[e],e)})})}};u.__init(),$(function(){u.init(),s.init()})});
;/*!waimai:static/utils/statis.js*/
define("waimai:static/utils/statis",function(t,e,n){{var e;window._hmt=window._hmt||[],t("wcommon:static/util")}$(function(){var t=document.createElement("script");t.src="//hm.baidu.com/hm.js?e0401ea6bbde08becd704794fb788176";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}),window.statis=e=n.exports={trackPage:function(t){window._hmt.push(["_trackPageview",t])},trackEvent:function(t,e,n,a){window._hmt.push(["_trackEvent",t,e,n,a]);var i=["/event"];$.each(arguments,function(t,e){e&&i.push(e)}),this.trackPage(i.join("/"))}}});
;/*!waimai:static/utils/timer.js*/
define("waimai:static/utils/timer",function(n,e,t){!function(){var n={tmpl:function(n,e){var t=/\{([^\}]*)\}/g;return n.replace(t,function(n,t){return"undefined"!=typeof e[t]?e[t]:""})}},e=function(n,t){var o=this;if(o.nodeMapList=[],$.isPlainObject(n)?(t=n,t.container=$(document.body)):(t=t||{},t.container=$(n)),o.options=$.extend({},e.DEFAULTS,t),!o.paramsCheck())throw new Error("参数配置有误");return o.init(),o};e.PRECISION={day:"day",hour:"hour",minute:"minute",second:"second"},e.DEFAULTS={selector:"[data-role='timer']",step:1,now:0,end:null,precision:e.PRECISION.second,timingTpl:"{days}天{hours}小时{minutes}分{seconds}秒",endTpl:"已结束"},e.prototype={init:function(){var n,e=this,t=e.options,o=$(t.selector,t.container),i=e.nodeMapList;o.each(function(e,o){n=o.getAttribute("data-end"),n||(n=t.end>0?t.end:t.now),i.push({node:o,life:n-t.now})}),e.loop()},paramsCheck:function(){var n=this,e=n.options,t=function(){};return e.now=e.now,e.end=e.end?e.end:0,e.step=parseInt(e.step),e.on=e.on||{},e.on.end=$.isFunction(e.on.end)?e.on.end:t,e.selector&&e.now&&!isNaN(e.step)?(e.step=Math.max(1e3*e.step,1e3),!0):!1},loop:function(){var n=this;clearTimeout(n.loopTimer),n.burn(),n.filter(),n.refresh(),n.nodeMapList.length>0&&(n.loopTimer=setTimeout(function(){n.loop()},n.options.step))},refresh:function(){var e=this,t=e.options.timingTpl,o=(e.options.endTpl,e.nodeMapList);$.each(o,function(o,i){i.node.innerHTML=n.tmpl(t,e.convertDate(i.life))})},filter:function(){{var n=this,e=[],t=[];n.options,n.nodeMapList}$.each(n.nodeMapList,function(n,o){o.life<=0?t.push(o):e.push(o)}),t.length>0&&n.onEnd(t),n.nodeMapList=e},burn:function(){var n=this,e=n.options,t=n.nodeMapList;$.each(t,function(n,t){t.life-=e.step})},convertDate:function(n){var t=this.options.precision,o=1e3,i=60*o,s=60*i,r=24*s,a=0,p=0,c=0,d=0;switch(t){case e.PRECISION.day:a=parseInt(n/r);break;case e.PRECISION.hour:a=parseInt(n/r),p=parseInt(n%r/s);break;case e.PRECISION.minute:a=parseInt(n/r),p=parseInt(n%r/s),c=parseInt(n%s/i);break;case e.PRECISION.second:a=parseInt(n/r),p=parseInt(n%r/s),c=parseInt(n%s/i),d=parseInt(n%i/o)}return{days:a,hours:p,minutes:c,seconds:d}},restart:function(n,e,t){var o,i=this,s={},r=i.nodeMapList;if(o=$(n,i.container)[0],e&&t)if(s.node=o,s.life=t-e,s.life<=0)i.onEnd([s]);else{for(var a=0;a<r.length;a++)if(r[a].node==o){r.splice(a,1);break}r.push(s),i.loop()}},onEnd:function(n){var e=this,t=e.options.on.end;$.each(n,function(n,t){t.node.innerHTML=e.options.endTpl}),t(n)}},t.exports=e}()});
;/*!waimai:static/plugin/jquery.href.js*/
!function(e){e.extend({href:function(){var e,n=window.location.href,t=new RegExp;return n=n.replace(/#.*/,""),{getValue:function(){return n},replace:function(){return n=n.replace(arguments[0],arguments[1]),this},path:function(e){return n=-1!=n.indexOf("?")?n.replace(/\/[^\/]*\?/,"/"+e+"?"):n.replace(/\/[^\/]*$/,"/"+e+"?"),this},param:function(){var r=arguments,i=r.length;if(0===i)return n=n.replace(/\?(.)*/,"?"),this;if(1==i&&"string"==typeof r[0])return t.compile("[&?]"+r[0]+"=([^=&?#]*)"),n.match(t)?n.match(t)[1]:"";if(2==i)return t.compile("[&?]"+r[0]+"=([^=&?#]*)"),e=n.match(t),n=e?n.replace(r[0]+"="+e[1],r[0]+"="+r[1]):n+(n.indexOf("?")==n.length-1?"":"&")+r[0]+"="+r[1],this;if("object"==typeof r[0]){var c,a=r[0];for(c in a)r.callee(c,a[c])}return this},exec:function(){window.location.href=n}}}})}(jQuery);
;/*!waimai:static/plugin/jquery.lazyload.js*/
!function(e,t,o,n){var i=e(t);e.fn.lazyload=function(r){function f(){var t=0;clearTimeout(a),a=setTimeout(function(){d.each(function(){var o=e(this),n=this;if(!h.skip_invisible||o.is(":visible"))if(e.abovethetop(n,h)||e.leftofbegin(n,h));else if(e.belowthefold(n,h)||e.rightoffold(n,h)){if(++t>h.failure_limit)return!1}else o.trigger("appear"),t=0})},500)}var l,a,d=this,h={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return r&&(n!==r.failurelimit&&(r.failure_limit=r.failurelimit,delete r.failurelimit),n!==r.effectspeed&&(r.effect_speed=r.effectspeed,delete r.effectspeed),e.extend(h,r)),l=h.container===n||h.container===t?i:e(h.container),0===h.event.indexOf("scroll")&&l.bind(h.event,function(){return f()}),this.each(function(){var t=this,o=e(t);t.loaded=!1,o.one("appear",function(){if(!this.loaded){if(h.appear){var n=d.length;h.appear.call(t,n,h)}e("<img />").bind("load",function(){o.hide().attr("src",o.data(h.data_attribute))[h.effect](h.effect_speed),t.loaded=!0;var n=e.grep(d,function(e){return!e.loaded});if(d=e(n),h.load){var i=d.length;h.load.call(t,i,h)}}).attr("src",o.data(h.data_attribute))}}),0!==h.event.indexOf("scroll")&&o.bind(h.event,function(){t.loaded||o.trigger("appear")})}),i.bind("resize",function(){f()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&d.each(function(){e(this).trigger("appear")})}),e(o).ready(function(){f()}),this},e.belowthefold=function(o,r){var f;return f=r.container===n||r.container===t?i.height()+i.scrollTop():e(r.container).offset().top+e(r.container).height(),f<=e(o).offset().top-r.threshold},e.rightoffold=function(o,r){var f;return f=r.container===n||r.container===t?i.width()+i.scrollLeft():e(r.container).offset().left+e(r.container).width(),f<=e(o).offset().left-r.threshold},e.abovethetop=function(o,r){var f;return f=r.container===n||r.container===t?i.scrollTop():e(r.container).offset().top,f>=e(o).offset().top+r.threshold+e(o).height()},e.leftofbegin=function(o,r){var f;return f=r.container===n||r.container===t?i.scrollLeft():e(r.container).offset().left,f>=e(o).offset().left+r.threshold+e(o).width()},e.inviewport=function(t,o){return!(e.rightoffold(t,o)||e.leftofbegin(t,o)||e.belowthefold(t,o)||e.abovethetop(t,o))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document);
;/*!waimai:static/plugin/jquery.placeholder.js*/
!function(e,a,t){function l(e){var a={},l=/^jQuery\d+$/;return t.each(e.attributes,function(e,t){t.specified&&!l.test(t.name)&&(a[t.name]=t.value)}),a}function r(e,l){var r=this,o=t(r);if(r.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),e===!0)return o[0].value=l;o.focus()}else r.value="",o.removeClass("placeholder"),r==a.activeElement&&r.select()}function o(){var e,a=this,o=t(a),d=this.id;if(""==a.value){if("password"==a.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(c){e=t("<input>").attr(t.extend(l(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":d}).bind("focus.placeholder",r),o.data({"placeholder-textinput":e,"placeholder-id":d}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",d).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}var d,c,n="placeholder"in a.createElement("input"),i="placeholder"in a.createElement("textarea"),u=t.fn,h=t.valHooks,p=t.propHooks;n&&i?(c=u.placeholder=function(){return this},c.input=c.textarea=!0):(c=u.placeholder=function(){var e=this;return e.filter((n?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},c.input=n,c.textarea=i,d={get:function(e){var a=t(e),l=a.data("placeholder-password");return l?l[0].value:a.data("placeholder-enabled")&&a.hasClass("placeholder")?"":e.value},set:function(e,l){var d=t(e),c=d.data("placeholder-password");return c?c[0].value=l:d.data("placeholder-enabled")?(""==l?(e.value=l,e!=a.activeElement&&o.call(e)):d.hasClass("placeholder")?r.call(e,!0,l)||(e.value=l):e.value=l,d):e.value=l}},n||(h.input=d,p.value=d),i||(h.textarea=d,p.value=d),t(function(){t(a).delegate("form","submit.placeholder",function(){var e=t(".placeholder",this).each(r);setTimeout(function(){e.each(o)},10)})}),t(e).bind("beforeunload.placeholder",function(){t(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery);
;/*!waimai:static/plugin/Listener.js*/
!function(){var n=50,t=25,e={},r=[].slice,a={},c=function(n,t,r,c){var o=a[n];o||(o=a[n]={}),o[t]=o[t]||[],o[t].push({func:r,context:c||e})},o=function(n,t,r,a){var o=function(){return e.off(n,t,o),r.apply(a||e,arguments)};c(n,t,o,a)},f=function(e,c){if(a[e]&&a[e][c]&&a[e][c].length){for(var o=a[e][c],f=[],i=o.length;i--;)f.push({handler:o[i],args:r.call(arguments,1)});!function(){var e=+new Date;do{var r=f.shift(),a=r.handler;try{a.func.apply(a.context,r.args)}catch(c){}}while(f.length&&+new Date-e<n);f.length>0&&setTimeout(arguments.callee,t)}()}},i=function(n,t,r,c){if(c=c||e,a[n]&&a[n][t]&&a[n][t].length)for(var o,f=a[n][t],i=f.length;i--;)o=f[i],o.func===r&&o.context===c&&f.splice(i,1)};e.on=c,e.once=o,e.trigger=f,e.off=i,window.listener=window.listener||e}();
;/*!waimai:static/plugin/photoswipe-ui-default.min.js*/
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,o,l,r,i,s,a,u,c,p,d,m,f,h,w,v,g,b,_,C=this,T=!1,I=!0,E=!0,F={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},x=function(e){if(v)return!0;e=e||window.event,w.timeToIdle&&w.mouseUsed&&!c&&D();for(var n,o,l=e.target||e.srcElement,r=l.getAttribute("class")||"",i=0;i<N.length;i++)n=N[i],n.onTap&&r.indexOf("pswp__"+n.name)>-1&&(n.onTap(),o=!0);if(o){e.stopPropagation&&e.stopPropagation(),v=!0;var s=t.features.isOldAndroid?600:30;g=setTimeout(function(){v=!1},s)}},S=function(){return!e.likelyTouchDevice||w.mouseUsed||screen.width>w.fitControlsWidth},k=function(e,n,o){t[(o?"add":"remove")+"Class"](e,"pswp__"+n)},K=function(){var e=1===w.getNumItemsFn();e!==h&&(k(o,"ui--one-slide",e),h=e)},L=function(){k(a,"share-modal--hidden",E)},O=function(){return E=!E,E?(t.removeClass(a,"pswp__share-modal--fade-in"),setTimeout(function(){E&&L()},300)):(L(),setTimeout(function(){E||t.addClass(a,"pswp__share-modal--fade-in")},30)),E||y(),!1},R=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),E||O(),1))},y=function(){for(var e,t,n,o,l,r="",i=0;i<w.shareButtons.length;i++)e=w.shareButtons[i],n=w.getImageURLForShare(e),o=w.getPageURLForShare(e),l=w.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(o)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(l)),r+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",w.parseShareButtonOut&&(r=w.parseShareButtonOut(e,r));a.children[0].innerHTML=r,a.children[0].onclick=R},z=function(e){for(var n=0;n<w.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+w.closeElClasses[n]))return!0},M=0,D=function(){clearTimeout(_),M=0,c&&C.setIdle(!1)},A=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(_),_=setTimeout(function(){C.setIdle(!0)},w.timeToIdleOutside))},P=function(){w.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=C.getFullscreenAPI()),n?(t.bind(document,n.eventK,C.updateFullscreen),C.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},U=function(){w.preloaderEl&&(Z(!0),p("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&Z(!1):Z(!0)},w.loadingIndicatorDelay)}),p("imageLoadComplete",function(t,n){e.currItem===n&&Z(!0)}))},Z=function(e){m!==e&&(k(d,"preloader--active",!e),m=e)},q=function(e){var n=e.vGap;if(S()){var i=w.barsSize;if(w.captionEl&&"auto"===i.bottom)if(r||(r=t.createEl("pswp__caption pswp__caption--fake"),r.appendChild(t.createEl("pswp__caption__center")),o.insertBefore(r,l),t.addClass(o,"pswp__ui--fit")),w.addCaptionHTMLFn(e,r,!0)){var s=r.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=i.top;else n.bottom="auto"===i.bottom?0:i.bottom;n.top=i.top}else n.top=n.bottom=0},B=function(){w.timeToIdle&&p("mouseUsed",function(){t.bind(document,"mousemove",D),t.bind(document,"mouseout",A),b=setInterval(function(){M++,2===M&&C.setIdle(!0)},w.timeToIdle/2)})},H=function(){p("onVerticalDrag",function(e){I&&.95>e?C.hideControls():!I&&e>=.95&&C.showControls()});var e;p("onPinchClose",function(t){I&&.9>t?(C.hideControls(),e=!0):e&&!I&&t>.9&&C.showControls()}),p("zoomGestureEnded",function(){e=!1,e&&!I&&C.showControls()})},N=[{name:"caption",option:"captionEl",onInit:function(e){l=e}},{name:"share-modal",option:"shareEl",onInit:function(e){a=e},onTap:function(){O()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){O()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){i=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){d=e}}],W=function(){var e,n,l,r=function(o){if(o)for(var r=o.length,i=0;r>i;i++){e=o[i],n=e.className;for(var s=0;s<N.length;s++)l=N[s],n.indexOf("pswp__"+l.name)>-1&&(w[l.option]?(t.removeClass(e,"pswp__element--disabled"),l.onInit&&l.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};r(o.children);var i=t.getChildByClass(o,"pswp__top-bar");i&&r(i.children)};C.init=function(){t.extend(e.options,F,!0),w=e.options,o=t.getChildByClass(e.scrollWrap,"pswp__ui"),p=e.listen,H(),p("beforeChange",C.update),p("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(w.getDoubleTapZoom(!1,e.currItem),t,333)}),p("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(o.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),p("bindEvents",function(){t.bind(o,"pswpTap click",x),t.bind(e.scrollWrap,"pswpTap",C.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",C.onMouseOver)}),p("unbindEvents",function(){E||O(),b&&clearInterval(b),t.unbind(document,"mouseout",A),t.unbind(document,"mousemove",D),t.unbind(o,"pswpTap click",x),t.unbind(e.scrollWrap,"pswpTap",C.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",C.onMouseOver),n&&(t.unbind(document,n.eventK,C.updateFullscreen),n.isFullscreen()&&(w.hideAnimationDuration=0,n.exit()),n=null)}),p("destroy",function(){w.captionEl&&(r&&o.removeChild(r),t.removeClass(l,"pswp__caption--empty")),a&&(a.children[0].onclick=null),t.removeClass(o,"pswp__ui--over-close"),t.addClass(o,"pswp__ui--hidden"),C.setIdle(!1)}),w.showAnimationDuration||t.removeClass(o,"pswp__ui--hidden"),p("initialZoomIn",function(){w.showAnimationDuration&&t.removeClass(o,"pswp__ui--hidden")}),p("initialZoomOut",function(){t.addClass(o,"pswp__ui--hidden")}),p("parseVerticalMargin",q),W(),w.shareEl&&s&&a&&(E=!0),K(),B(),P(),U()},C.setIdle=function(e){c=e,k(o,"ui--idle",e)},C.update=function(){I&&e.currItem?(C.updateIndexIndicator(),w.captionEl&&(w.addCaptionHTMLFn(e.currItem,l),k(l,"caption--empty",!e.currItem.title)),T=!0):T=!1,E||O(),K()},C.updateFullscreen=function(o){o&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},C.updateIndexIndicator=function(){w.counterEl&&(i.innerHTML=e.getCurrentIndex()+1+w.indexIndicatorSep+w.getNumItemsFn())},C.onGlobalTap=function(n){n=n||window.event;var o=n.target||n.srcElement;if(!v)if(n.detail&&"mouse"===n.detail.pointerType){if(z(o))return void e.close();t.hasClass(o,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?w.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(w.tapToToggleControls&&(I?C.hideControls():C.showControls()),w.tapToClose&&(t.hasClass(o,"pswp__img")||z(o)))return void e.close()},C.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;k(o,"ui--over-close",z(t))},C.hideControls=function(){t.addClass(o,"pswp__ui--hidden"),I=!1},C.showControls=function(){I=!0,T||C.update(),t.removeClass(o,"pswp__ui--hidden")},C.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},C.getFullscreenAPI=function(){var t,n=document.documentElement,o="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:o}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+o}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+o}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return u=w.closeOnScroll,w.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return w.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e});
;/*!waimai:static/plugin/photoswipe.min.js*/
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,i){var o={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var a=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&r.length>0&&(r=parseInt(r[1],10),r>=1&&8>r&&(i.isOldIOSPhone=!0))}var l=a.match(/Android\s([0-9\.]*)/),s=l?l[1]:0;s=parseFloat(s),s>=1&&(4.4>s&&(i.isOldAndroid=!0),i.androidVersion=s),i.isMobileOpera=/opera mini|opera mobi/i.test(a)}for(var u,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],m=0;4>m;m++){n=p[m];for(var f=0;3>f;f++)u=d[f],c=n+(n?u.charAt(0).toUpperCase()+u.slice(1):u),!i[u]&&c in t&&(i[u]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var h=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),i=window.setTimeout(function(){e(t+n)},n);return h=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=i,i}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,i){t=t.split(" ");for(var o,a=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)});var a=this,r=25,l=3,s={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(s,i);var u,c,d,p,m,f,h,v,y,x,g,w,b,I,C,D,T,M,S,A,E,O,k,R,Z,P,L,F,z,_,N,U,H,Y,W,B,G,X,V,K,q,$,j,J,Q,et,tt,nt,it,ot,at,rt,lt,st,ut,ct,dt,pt=function(){return{x:0,y:0}},mt=pt(),ft=pt(),ht=pt(),vt={},yt=0,xt={},gt=pt(),wt=0,bt=!0,It=[],Ct={},Dt=!1,Tt=function(e,t){o.extend(a,t.publicMethods),It.push(e)},Mt=function(e){var t=ti();return e>t-1?e-t:0>e?t+e:e},St={},At=function(e,t){return St[e]||(St[e]=[]),St[e].push(t)},Et=function(e){var t=St[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(a,n)}},Ot=function(){return(new Date).getTime()},kt=function(e){ut=e,a.bg.style.opacity=e*s.bgOpacity},Rt=function(e,t,n,i,o){(!Dt||o&&o!==a.currItem)&&(i/=o?o.fitRatio:a.currItem.fitRatio),e[O]=w+t+"px, "+n+"px"+b+" scale("+i+")"},Zt=function(e){ot&&(e&&(x>a.currItem.fitRatio?Dt||(mi(a.currItem,!1,!0),Dt=!0):Dt&&(mi(a.currItem),Dt=!1)),Rt(ot,ht.x,ht.y,x))},Pt=function(e){e.container&&Rt(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Lt=function(e,t){t[O]=w+e+"px, 0px"+b},Ft=function(e,t){if(!s.loop&&t){var n=p+(gt.x*yt-e)/gt.x,i=Math.round(e-wn.x);(0>n&&i>0||n>=ti()-1&&0>i)&&(e=wn.x+i*s.mainScrollEndFriction)}wn.x=e,Lt(e,m)},zt=function(e,t){var n=bn[e]-xt[e];return ft[e]+mt[e]+n-n*(t/g)},_t=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Nt=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Ut=null,Ht=function(){Ut&&(o.unbind(document,"mousemove",Ht),o.addClass(e,"pswp--has_mouse"),s.mouseUsed=!0,Et("mouseUsed")),Ut=setTimeout(function(){Ut=null},100)},Yt=function(){o.bind(document,"keydown",a),N.transform&&o.bind(a.scrollWrap,"click",a),s.mouseUsed||o.bind(document,"mousemove",Ht),o.bind(window,"resize scroll orientationchange",a),Et("bindEvents")},Wt=function(){o.unbind(window,"resize scroll orientationchange",a),o.unbind(window,"scroll",y.scroll),o.unbind(document,"keydown",a),o.unbind(document,"mousemove",Ht),N.transform&&o.unbind(a.scrollWrap,"click",a),V&&o.unbind(window,h,a),clearTimeout(U),Et("unbindEvents")},Bt=function(e,t){var n=ui(a.currItem,vt,e);return t&&(it=n),n},Gt=function(e){return e||(e=a.currItem),e.initialZoomLevel},Xt=function(e){return e||(e=a.currItem),e.w>0?s.maxSpreadZoom:1},Vt=function(e,t,n,i){return i===a.currItem.initialZoomLevel?(n[e]=a.currItem.initialPosition[e],!0):(n[e]=zt(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Kt=function(){if(O){var t=N.perspective&&!R;return w="translate"+(t?"3d(":"("),void(b=N.perspective?", 0px)":")")}O="left",o.addClass(e,"pswp--ie"),Lt=function(e,t){t.left=e+"px"},Pt=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Zt=function(){if(ot){var e=ot,t=a.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=ht.x+"px",e.top=ht.y+"px"}}},qt=function(e){var t="";s.escKey&&27===e.keyCode?t="close":s.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,a[t]()))},$t=function(e){e&&($||q||at||G)&&(e.preventDefault(),e.stopPropagation())},jt=function(){a.setScrollOffset(0,o.getScrollY())},Jt={},Qt=0,en=function(e){Jt[e]&&(Jt[e].raf&&P(Jt[e].raf),Qt--,delete Jt[e])},tn=function(e){Jt[e]&&en(e),Jt[e]||(Qt++,Jt[e]={})},nn=function(){for(var e in Jt)Jt.hasOwnProperty(e)&&en(e)},on=function(e,t,n,i,o,a,r){var l,s=Ot();tn(e);var u=function(){if(Jt[e]){if(l=Ot()-s,l>=i)return en(e),a(n),void(r&&r());a((n-t)*o(l/i)+t),Jt[e].raf=Z(u)}};u()},an={shout:Et,listen:At,viewportSize:vt,options:s,isMainScrollAnimating:function(){return at},getZoomLevel:function(){return x},getCurrentIndex:function(){return p},isDragging:function(){return V},isZooming:function(){return et},setScrollOffset:function(e,t){xt.x=e,_=xt.y=t,Et("updateScrollOffset",xt)},applyZoomPan:function(e,t,n,i){ht.x=t,ht.y=n,x=e,Zt(i)},init:function(){if(!u&&!c){var n;a.framework=o,a.template=e,a.bg=o.getChildByClass(e,"pswp__bg"),L=e.className,u=!0,N=o.detectFeatures(),Z=N.raf,P=N.caf,O=N.transform,z=N.oldIE,a.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),a.container=o.getChildByClass(a.scrollWrap,"pswp__container"),m=a.container.style,a.itemHolders=D=[{el:a.container.children[0],wrap:0,index:-1},{el:a.container.children[1],wrap:0,index:-1},{el:a.container.children[2],wrap:0,index:-1}],D[0].el.style.display=D[2].el.style.display="none",Kt(),y={resize:a.updateSize,orientationchange:function(){clearTimeout(U),U=setTimeout(function(){vt.x!==a.scrollWrap.clientWidth&&a.updateSize()},500)},scroll:jt,keydown:qt,click:$t};var i=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!i||(s.showAnimationDuration=s.hideAnimationDuration=0),n=0;n<It.length;n++)a["init"+It[n]]();if(t){var r=a.ui=new t(a,o);r.init()}Et("firstUpdate"),p=p||s.index||0,(isNaN(p)||0>p||p>=ti())&&(p=0),a.currItem=ei(p),(N.isOldIOSPhone||N.isOldAndroid)&&(bt=!1),e.setAttribute("aria-hidden","false"),s.modal&&(bt?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===_&&(Et("initialLayout"),_=F=o.getScrollY());var d="pswp--open ";for(s.mainClass&&(d+=s.mainClass+" "),s.showHideOpacity&&(d+="pswp--animate_opacity "),d+=R?"pswp--touch":"pswp--notouch",d+=N.animationName?" pswp--css_animation":"",d+=N.svg?" pswp--svg":"",o.addClass(e,d),a.updateSize(),f=-1,wt=null,n=0;l>n;n++)Lt((n+f)*gt.x,D[n].el.style);z||o.bind(a.scrollWrap,v,a),At("initialZoomInEnd",function(){a.setContent(D[0],p-1),a.setContent(D[2],p+1),D[0].el.style.display=D[2].el.style.display="block",s.focus&&e.focus(),Yt()}),a.setContent(D[1],p),a.updateCurrItem(),Et("afterInit"),bt||(I=setInterval(function(){Qt||V||et||x!==a.currItem.initialZoomLevel||a.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){u&&(u=!1,c=!0,Et("close"),Wt(),ii(a.currItem,null,!0,a.destroy))},destroy:function(){Et("destroy"),$n&&clearTimeout($n),e.setAttribute("aria-hidden","true"),e.className=L,I&&clearInterval(I),o.unbind(a.scrollWrap,v,a),o.unbind(window,"scroll",a),Mn(),nn(),St=null},panTo:function(e,t,n){n||(e>it.min.x?e=it.min.x:e<it.max.x&&(e=it.max.x),t>it.min.y?t=it.min.y:t<it.max.y&&(t=it.max.y)),ht.x=e,ht.y=t,Zt()},handleEvent:function(e){e=e||window.event,y[e.type]&&y[e.type](e)},goTo:function(e){e=Mt(e);var t=e-p;wt=t,p=e,a.currItem=ei(p),yt-=t,Ft(gt.x*yt),nn(),at=!1,a.updateCurrItem()},next:function(){a.goTo(p+1)},prev:function(){a.goTo(p-1)},updateCurrZoomItem:function(e){if(e&&Et("beforeChange",0),D[1].el.children.length){var t=D[1].el.children[0];ot=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ot=null;it=a.currItem.bounds,g=x=a.currItem.initialZoomLevel,ht.x=it.center.x,ht.y=it.center.y,e&&Et("afterChange")},invalidateCurrItems:function(){C=!0;for(var e=0;l>e;e++)D[e].item&&(D[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==wt){var t,n=Math.abs(wt);if(!(e&&2>n)){a.currItem=ei(p),Dt=!1,Et("beforeChange",wt),n>=l&&(f+=wt+(wt>0?-l:l),n=l);for(var i=0;n>i;i++)wt>0?(t=D.shift(),D[l-1]=t,f++,Lt((f+2)*gt.x,t.el.style),a.setContent(t,p-n+i+1+1)):(t=D.pop(),D.unshift(t),f--,Lt(f*gt.x,t.el.style),a.setContent(t,p+n-i-1-1));if(ot&&1===Math.abs(wt)){var o=ei(T);o.initialZoomLevel!==x&&(ui(o,vt),mi(o),Pt(o))}wt=0,a.updateCurrZoomItem(),T=p,Et("afterChange")}}},updateSize:function(t){if(!bt&&s.modal){var n=o.getScrollY();if(_!==n&&(e.style.top=n+"px",_=n),!t&&Ct.x===window.innerWidth&&Ct.y===window.innerHeight)return;Ct.x=window.innerWidth,Ct.y=window.innerHeight,e.style.height=Ct.y+"px"}if(vt.x=a.scrollWrap.clientWidth,vt.y=a.scrollWrap.clientHeight,jt(),gt.x=vt.x+Math.round(vt.x*s.spacing),gt.y=vt.y,Ft(gt.x*yt),Et("beforeResize"),void 0!==f){for(var i,r,u,c=0;l>c;c++)i=D[c],Lt((c+f)*gt.x,i.el.style),u=p+c-1,s.loop&&ti()>2&&(u=Mt(u)),r=ei(u),r&&(C||r.needsUpdate||!r.bounds)?(a.cleanSlide(r),a.setContent(i,u),1===c&&(a.currItem=r,a.updateCurrZoomItem(!0)),r.needsUpdate=!1):-1===i.index&&u>=0&&a.setContent(i,u),r&&r.container&&(ui(r,vt),mi(r),Pt(r));C=!1}g=x=a.currItem.initialZoomLevel,it=a.currItem.bounds,it&&(ht.x=it.center.x,ht.y=it.center.y,Zt(!0)),Et("resize")},zoomTo:function(e,t,n,i,a){t&&(g=x,bn.x=Math.abs(t.x)-ht.x,bn.y=Math.abs(t.y)-ht.y,_t(ft,ht));var r=Bt(e,!1),l={};Vt("x",r,l,e),Vt("y",r,l,e);var s=x,u={x:ht.x,y:ht.y};Nt(l);var c=function(t){1===t?(x=e,ht.x=l.x,ht.y=l.y):(x=(e-s)*t+s,ht.x=(l.x-u.x)*t+u.x,ht.y=(l.y-u.y)*t+u.y),a&&a(t),Zt(1===t)};n?on("customZoomTo",0,1,n,i||o.easing.sine.inOut,c):c(1)}},rn=30,ln=10,sn={},un={},cn={},dn={},pn={},mn=[],fn={},hn=[],vn={},yn=0,xn=pt(),gn=0,wn=pt(),bn=pt(),In=pt(),Cn=function(e,t){return e.x===t.x&&e.y===t.y},Dn=function(e,t){return Math.abs(e.x-t.x)<r&&Math.abs(e.y-t.y)<r},Tn=function(e,t){return vn.x=Math.abs(e.x-t.x),vn.y=Math.abs(e.y-t.y),Math.sqrt(vn.x*vn.x+vn.y*vn.y)},Mn=function(){j&&(P(j),j=null)},Sn=function(){V&&(j=Z(Sn),Wn())},An=function(){return!("fit"===s.scaleMode&&x===a.currItem.initialZoomLevel)},En=function(e,t){return!(!e||e===document||e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1||(t(e)?!e:!En(e.parentNode,t)))},On={},kn=function(e,t){return On.prevent=!En(e.target,s.isClickableElement),Et("preventDragEvent",e,t,On),On.prevent},Rn=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Zn=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Pn=function(e,t,n){if(e-Y>50){var i=hn.length>2?hn.shift():{};i.x=t,i.y=n,hn.push(i),Y=e}},Ln=function(){var e=ht.y-a.currItem.initialPosition.y;return 1-Math.abs(e/(vt.y/2))},Fn={},zn={},_n=[],Nn=function(e){for(;_n.length>0;)_n.pop();return k?(dt=0,mn.forEach(function(e){0===dt?_n[0]=e:1===dt&&(_n[1]=e),dt++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(_n[0]=Rn(e.touches[0],Fn),e.touches.length>1&&(_n[1]=Rn(e.touches[1],zn))):(Fn.x=e.pageX,Fn.y=e.pageY,Fn.id="",_n[0]=Fn),_n},Un=function(e,t){var n,i,o,r,l=0,u=ht[e]+t[e],c=t[e]>0,d=wn.x+t.x,p=wn.x-fn.x;return n=u>it.min[e]||u<it.max[e]?s.panEndFriction:1,u=ht[e]+t[e]*n,!s.allowPanToNext&&x!==a.currItem.initialZoomLevel||(ot?"h"!==rt||"x"!==e||q||(c?(u>it.min[e]&&(n=s.panEndFriction,l=it.min[e]-u,i=it.min[e]-ft[e]),(0>=i||0>p)&&ti()>1?(r=d,0>p&&d>fn.x&&(r=fn.x)):it.min.x!==it.max.x&&(o=u)):(u<it.max[e]&&(n=s.panEndFriction,l=u-it.max[e],i=ft[e]-it.max[e]),(0>=i||p>0)&&ti()>1?(r=d,p>0&&d<fn.x&&(r=fn.x)):it.min.x!==it.max.x&&(o=u))):r=d,"x"!==e)?void(at||J||x>a.currItem.fitRatio&&(ht[e]+=t[e]*n)):(void 0!==r&&(Ft(r,!0),J=r!==fn.x),it.min.x!==it.max.x&&(void 0!==o?ht.x=o:J||(ht.x+=t.x*n)),void 0!==r)},Hn=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Qn)return void e.preventDefault();if(!X||"mousedown"!==e.type){if(kn(e,!0)&&e.preventDefault(),Et("pointerDown"),k){var t=o.arraySearch(mn,e.pointerId,"id");0>t&&(t=mn.length),mn[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Nn(e),i=n.length;Q=null,nn(),V&&1!==i||(V=lt=!0,o.bind(window,h,a),B=ct=st=G=J=$=K=q=!1,rt=null,Et("firstTouchStart",n),_t(ft,ht),mt.x=mt.y=0,_t(dn,n[0]),_t(pn,dn),fn.x=gt.x*yt,hn=[{x:dn.x,y:dn.y}],Y=H=Ot(),Bt(x,!0),Mn(),Sn()),!et&&i>1&&!at&&!J&&(g=x,q=!1,et=K=!0,mt.y=mt.x=0,_t(ft,ht),_t(sn,n[0]),_t(un,n[1]),Zn(sn,un,In),bn.x=Math.abs(In.x)-ht.x,bn.y=Math.abs(In.y)-ht.y,tt=nt=Tn(sn,un))}}},Yn=function(e){if(e.preventDefault(),k){var t=o.arraySearch(mn,e.pointerId,"id");if(t>-1){var n=mn[t];n.x=e.pageX,n.y=e.pageY}}if(V){var i=Nn(e);if(rt||$||et)Q=i;else if(wn.x!==gt.x*yt)rt="h";else{var a=Math.abs(i[0].x-dn.x)-Math.abs(i[0].y-dn.y);Math.abs(a)>=ln&&(rt=a>0?"h":"v",Q=i)}}},Wn=function(){if(Q){var e=Q.length;if(0!==e)if(_t(sn,Q[0]),cn.x=sn.x-dn.x,cn.y=sn.y-dn.y,et&&e>1){if(dn.x=sn.x,dn.y=sn.y,!cn.x&&!cn.y&&Cn(Q[1],un))return;_t(un,Q[1]),q||(q=!0,Et("zoomGestureStarted"));var t=Tn(sn,un),n=Kn(t);n>a.currItem.initialZoomLevel+a.currItem.initialZoomLevel/15&&(ct=!0);var i=1,o=Gt(),r=Xt();if(o>n)if(s.pinchToClose&&!ct&&g<=a.currItem.initialZoomLevel){var l=o-n,u=1-l/(o/1.2);kt(u),Et("onPinchClose",u),st=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>r&&(i=(n-r)/(6*o),i>1&&(i=1),n=r+i*o);0>i&&(i=0),tt=t,Zn(sn,un,xn),mt.x+=xn.x-In.x,mt.y+=xn.y-In.y,_t(In,xn),ht.x=zt("x",n),ht.y=zt("y",n),B=n>x,x=n,Zt()}else{if(!rt)return;if(lt&&(lt=!1,Math.abs(cn.x)>=ln&&(cn.x-=Q[0].x-pn.x),Math.abs(cn.y)>=ln&&(cn.y-=Q[0].y-pn.y)),dn.x=sn.x,dn.y=sn.y,0===cn.x&&0===cn.y)return;if("v"===rt&&s.closeOnVerticalDrag&&!An()){mt.y+=cn.y,ht.y+=cn.y;var c=Ln();return G=!0,Et("onVerticalDrag",c),kt(c),void Zt()}Pn(Ot(),sn.x,sn.y),$=!0,it=a.currItem.bounds;var d=Un("x",cn);d||(Un("y",cn),Nt(ht),Zt())}}},Bn=function(e){if(N.isOldAndroid){if(X&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(X),X=setTimeout(function(){X=0},600))}Et("pointerUp"),kn(e,!1)&&e.preventDefault();var t;if(k){var n=o.arraySearch(mn,e.pointerId,"id");if(n>-1)if(t=mn.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var r,l=Nn(e),u=l.length;if("mouseup"===e.type&&(u=0),2===u)return Q=null,!0;1===u&&_t(pn,l[0]),0!==u||rt||at||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Et("touchRelease",e,t));var c=-1;if(0===u&&(V=!1,o.unbind(window,h,a),Mn(),et?c=0:-1!==gn&&(c=Ot()-gn)),gn=1===u?Ot():-1,r=-1!==c&&150>c?"zoom":"swipe",et&&2>u&&(et=!1,1===u&&(r="zoomPointerUp"),Et("zoomGestureEnded")),Q=null,$||q||at||G)if(nn(),W||(W=Gn()),W.calculateSwipeSpeed("x"),G){var d=Ln();if(d<s.verticalDragRange)a.close();else{var p=ht.y,m=ut;on("verticalDrag",0,1,300,o.easing.cubic.out,function(e){ht.y=(a.currItem.initialPosition.y-p)*e+p,kt((1-m)*e+m),Zt()}),Et("onVerticalDrag",1)}}else{if((J||at)&&0===u){var f=Vn(r,W);if(f)return;r="zoomPointerUp"}if(!at)return"swipe"!==r?void qn():void(!J&&x>a.currItem.fitRatio&&Xn(W))}},Gn=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){hn.length>1?(e=Ot()-Y+50,t=hn[hn.length-2][i]):(e=Ot()-H,t=pn[i]),n.lastFlickOffset[i]=dn[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickSpeed[i]=n.lastFlickDist[i]>20?n.lastFlickOffset[i]/e:0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(ht[e]>it.min[e]?n.backAnimDestination[e]=it.min[e]:ht[e]<it.max[e]&&(n.backAnimDestination[e]=it.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,on("bounceZoomPan"+e,ht[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){ht[e]=t,Zt()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,ht[e]+=n.distanceOffset[e])},panAnimLoop:function(){return Jt.zoomPan&&(Jt.zoomPan.raf=Z(n.panAnimLoop),n.now=Ot(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Zt(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05)?(ht.x=Math.round(ht.x),ht.y=Math.round(ht.y),Zt(),void en("zoomPan")):void 0}};return n},Xn=function(e){return e.calculateSwipeSpeed("y"),it=a.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(tn("zoomPan"),e.lastNow=Ot(),void e.panAnimLoop())},Vn=function(e,t){var n;at||(yn=p);var i;if("swipe"===e){var r=dn.x-pn.x,l=t.lastFlickDist.x<10;r>rn&&(l||t.lastFlickOffset.x>20)?i=-1:-rn>r&&(l||t.lastFlickOffset.x<-20)&&(i=1)}var u;i&&(p+=i,0>p?(p=s.loop?ti()-1:0,u=!0):p>=ti()&&(p=s.loop?0:ti()-1,u=!0),u&&!s.loop||(wt+=i,yt-=i,n=!0));var c,d=gt.x*yt,m=Math.abs(d-wn.x);return n||d>wn.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?m/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,yn===p&&(n=!1),at=!0,Et("mainScrollAnimStart"),on("mainScroll",wn.x,d,c,o.easing.cubic.out,Ft,function(){nn(),at=!1,yn=-1,(n||yn!==p)&&a.updateCurrItem(),Et("mainScrollAnimComplete")}),n&&a.updateCurrItem(!0),n},Kn=function(e){return 1/nt*e*g},qn=function(){var e=x,t=Gt(),n=Xt();t>x?e=t:x>n&&(e=n);var i,r=1,l=ut;return st&&!B&&!ct&&t>x?(a.close(),!0):(st&&(i=function(e){kt((r-l)*e+l)}),a.zoomTo(e,0,200,o.easing.cubic.out,i),!0)};Tt("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){M=e+t,S=e+n,A=e+i,E=o?e+o:""};k=N.pointerEvent,k&&N.touch&&(N.touch=!1),k?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):N.touch?(e("touch","start","move","end","cancel"),R=!0):e("mouse","down","move","up"),h=S+" "+A+" "+E,v=M,k&&!R&&(R=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),a.likelyTouchDevice=R,y[M]=Hn,y[S]=Yn,y[A]=Bn,E&&(y[E]=y[A]),N.touch&&(v+=" mousedown",h+=" mousemove mouseup",y.mousedown=y[M],y.mousemove=y[S],y.mouseup=y[A]),R||(s.allowPanToNext=!1)}}});var $n,jn,Jn,Qn,ei,ti,ni,ii=function(t,n,i,r){$n&&clearTimeout($n),Qn=!0,Jn=!0;var l;t.initialLayout?(l=t.initialLayout,t.initialLayout=null):l=s.getThumbBoundsFn&&s.getThumbBoundsFn(p);var u=i?s.hideAnimationDuration:s.showAnimationDuration,c=function(){en("initialZoom"),i?(a.template.removeAttribute("style"),a.bg.removeAttribute("style")):(kt(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),Et("initialZoom"+(i?"OutEnd":"InEnd"))),r&&r(),Qn=!1};if(!u||!l||void 0===l.x)return Et("initialZoom"+(i?"Out":"In")),x=t.initialZoomLevel,_t(ht,t.initialPosition),Zt(),e.style.opacity=i?0:1,kt(1),void(u?setTimeout(function(){c()},u):c());var m=function(){var n=d,r=!a.currItem.src||a.currItem.loadError||s.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(x=l.w/t.w,ht.x=l.x,ht.y=l.y-F,a[r?"template":"bg"].style.opacity=.001,Zt()),tn("initialZoom"),i&&!n&&o.removeClass(e,"pswp--animated-in"),r&&(i?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),$n=setTimeout(function(){if(Et("initialZoom"+(i?"Out":"In")),i){var a=l.w/t.w,s={x:ht.x,y:ht.y},d=x,p=ut,m=function(t){1===t?(x=a,ht.x=l.x,ht.y=l.y-_):(x=(a-d)*t+d,ht.x=(l.x-s.x)*t+s.x,ht.y=(l.y-_-s.y)*t+s.y),Zt(),r?e.style.opacity=1-t:kt(p-t*p)};n?on("initialZoom",0,1,u,o.easing.cubic.out,m,c):(m(1),$n=setTimeout(c,u+20))}else x=t.initialZoomLevel,_t(ht,t.initialPosition),Zt(),kt(1),r?e.style.opacity=1:kt(1),$n=setTimeout(c,u+20)},i?25:90)};m()},oi={},ai=[],ri={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return jn.length}},li=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},si=function(e,t,n){var i=e.bounds;i.center.x=Math.round((oi.x-t)/2),i.center.y=Math.round((oi.y-n)/2)+e.vGap.top,i.max.x=t>oi.x?Math.round(oi.x-t):i.center.x,i.max.y=n>oi.y?Math.round(oi.y-n)+e.vGap.top:i.center.y,i.min.x=t>oi.x?0:i.center.x,i.min.y=n>oi.y?e.vGap.top:i.center.y},ui=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Et("parseVerticalMargin",e)),oi.x=t.x,oi.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=oi.x/e.w,a=oi.y/e.h;e.fitRatio=a>o?o:a;var r=s.scaleMode;"orig"===r?n=1:"fit"===r&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=li())}if(!n)return;return si(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=li(),e.initialPosition=e.bounds.center,e.bounds},ci=function(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,mi(t,i,t===a.currItem&&Dt),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},di=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},pi=function(e,t){return e.src&&e.loadError&&e.container?(t&&(e.container.innerHTML=""),e.container.innerHTML=s.errorMsg.replace("%url%",e.src),!0):void 0},mi=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},fi=function(){if(ai.length){for(var e,t=0;t<ai.length;t++)e=ai[t],e.holder.index===e.index&&ci(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);ai=[]}};Tt("Controller",{publicMethods:{lazyLoadItem:function(e){e=Mt(e);var t=ei(e);t&&(!t.loaded&&!t.loading||C)&&(Et("gettingData",e,t),t.src&&di(t))},initController:function(){o.extend(s,ri,!0),a.items=jn=n,ei=a.getItemAt,ti=s.getNumItemsFn,ni=s.loop,ti()<3&&(s.loop=!1),At("beforeChange",function(e){var t,n=s.preload,i=null===e||e>=0,o=Math.min(n[0],ti()),r=Math.min(n[1],ti());for(t=1;(i?r:o)>=t;t++)a.lazyLoadItem(p+t);for(t=1;(i?o:r)>=t;t++)a.lazyLoadItem(p-t)}),At("initialLayout",function(){a.currItem.initialLayout=s.getThumbBoundsFn&&s.getThumbBoundsFn(p)}),At("mainScrollAnimComplete",fi),At("initialZoomInEnd",fi),At("destroy",function(){for(var e,t=0;t<jn.length;t++)e=jn[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);ai=null})},getItemAt:function(e){return e>=0&&void 0!==jn[e]&&jn[e]},allowProgressiveImg:function(){return s.forceProgressiveLoading||!R||s.mouseUsed||screen.width>1200},setContent:function(e,t){s.loop&&(t=Mt(t));var n=a.getItemAt(e.index);n&&(n.container=null);var i,r=a.getItemAt(t);if(!r)return void(e.el.innerHTML="");Et("gettingData",t,r),e.index=t,e.item=r;var l=r.container=o.createEl("pswp__zoom-wrap");if(!r.src&&r.html&&(r.html.tagName?l.appendChild(r.html):l.innerHTML=r.html),pi(r),ui(r,vt),!r.src||r.loadError||r.loaded)r.src&&!r.loadError&&(i=o.createEl("pswp__img","img"),i.style.opacity=1,i.src=r.src,mi(r,i),ci(t,r,l,i,!0));else{if(r.loadComplete=function(n){if(u){if(e&&e.index===t){if(pi(n,!0))return n.loadComplete=n.img=null,ui(n,vt),Pt(n),void(e.index===p&&a.updateCurrZoomItem());n.imageAppended?!Qn&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):N.transform&&(at||Qn)?ai.push({item:n,baseDiv:l,img:n.img,index:t,holder:e,clearPlaceholder:!0}):ci(t,n,l,n.img,at||Qn,!0)}n.loadComplete=null,n.img=null,Et("imageLoadComplete",t,n)}},o.features.transform){var c="pswp__img pswp__img--placeholder";c+=r.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(c,r.msrc?"img":"");r.msrc&&(d.src=r.msrc),mi(r,d),l.appendChild(d),r.placeholder=d}r.loading||di(r),a.allowProgressiveImg()&&(!Jn&&N.transform?ai.push({item:r,baseDiv:l,img:r.img,index:t,holder:e}):ci(t,r,l,r.img,!0,!0))}Jn||t!==p?Pt(r):(ot=l.style,ii(r,i||r.img)),e.el.innerHTML="",e.el.appendChild(l)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var hi,vi={},yi=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};Tt("Tap",{publicMethods:{initTap:function(){At("firstTouchStart",a.onTapStart),At("touchRelease",a.onTapRelease),At("destroy",function(){vi={},hi=null})},onTapStart:function(e){e.length>1&&(clearTimeout(hi),hi=null)},onTapRelease:function(e,t){if(t&&!$&&!K&&!Qt){var n=t;if(hi&&(clearTimeout(hi),hi=null,Dn(n,vi)))return void Et("doubleTap",n);if("mouse"===t.type)return void yi(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||o.hasClass(e.target,"pswp__single-tap"))return void yi(e,t);_t(vi,n),hi=setTimeout(function(){yi(e,t),hi=null},300)}}}});var xi;Tt("DesktopZoom",{publicMethods:{initDesktopZoom:function(){z||(R?At("mouseUsed",function(){a.setupDesktopZoom()}):a.setupDesktopZoom(!0))},setupDesktopZoom:function(t){xi={};var n="wheel mousewheel DOMMouseScroll";At("bindEvents",function(){o.bind(e,n,a.handleMouseWheel)}),At("unbindEvents",function(){xi&&o.unbind(e,n,a.handleMouseWheel)}),a.mouseZoomedIn=!1;var i,r=function(){a.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),a.mouseZoomedIn=!1),1>x?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),l()},l=function(){i&&(o.removeClass(e,"pswp--dragging"),i=!1)};At("resize",r),At("afterChange",r),At("pointerDown",function(){a.mouseZoomedIn&&(i=!0,o.addClass(e,"pswp--dragging"))}),At("pointerUp",l),t||r()},handleMouseWheel:function(e){if(x<=a.currItem.fitRatio)return s.modal&&(!s.closeOnScroll||Qt||V?e.preventDefault():O&&Math.abs(e.deltaY)>2&&(d=!0,a.close())),!0;if(e.stopPropagation(),xi.x=0,"deltaX"in e)1===e.deltaMode?(xi.x=18*e.deltaX,xi.y=18*e.deltaY):(xi.x=e.deltaX,xi.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(xi.x=-.16*e.wheelDeltaX),xi.y=e.wheelDeltaY?-.16*e.wheelDeltaY:-.16*e.wheelDelta;else{if(!("detail"in e))return;xi.y=e.detail}Bt(x,!0);var t=ht.x-xi.x,n=ht.y-xi.y;(s.modal||t<=it.min.x&&t>=it.max.x&&n<=it.min.y&&n>=it.max.y)&&e.preventDefault(),a.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:vt.x/2+xt.x,y:vt.y/2+xt.y};var n=s.getDoubleTapZoom(!0,a.currItem),i=x===n;a.mouseZoomedIn=!i,a.zoomTo(i?a.currItem.initialZoomLevel:n,t,333),o[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var gi,wi,bi,Ii,Ci,Di,Ti,Mi,Si,Ai,Ei,Oi,ki={history:!0,galleryUID:1},Ri=function(){return Ei.hash.substring(1)},Zi=function(){gi&&clearTimeout(gi),bi&&clearTimeout(bi)},Pi=function(){var e=Ri(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(s.galleryPIDs){var a=t.pid;for(t.pid=0,n=0;n<jn.length;n++)if(jn[n].pid===a){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Li=function(){if(bi&&clearTimeout(bi),Qt||V)return void(bi=setTimeout(Li,500));Ii?clearTimeout(wi):Ii=!0;var e=p+1,t=ei(p);t.hasOwnProperty("pid")&&(e=t.pid);var n=Ti+"&gid="+s.galleryUID+"&pid="+e;Mi||-1===Ei.hash.indexOf(n)&&(Ai=!0);var i=Ei.href.split("#")[0]+"#"+n;Oi?"#"+n!==window.location.hash&&history[Mi?"replaceState":"pushState"]("",document.title,i):Mi?Ei.replace(i):Ei.hash=n,Mi=!0,wi=setTimeout(function(){Ii=!1},60)};Tt("History",{publicMethods:{initHistory:function(){if(o.extend(s,ki,!0),s.history){Ei=window.location,Ai=!1,Si=!1,Mi=!1,Ti=Ri(),Oi="pushState"in history,Ti.indexOf("gid=")>-1&&(Ti=Ti.split("&gid=")[0],Ti=Ti.split("?gid=")[0]),At("afterChange",a.updateURL),At("unbindEvents",function(){o.unbind(window,"hashchange",a.onHashChange)});var e=function(){Di=!0,Si||(Ai?history.back():Ti?Ei.hash=Ti:Oi?history.pushState("",document.title,Ei.pathname+Ei.search):Ei.hash=""),Zi()};At("unbindEvents",function(){d&&e()}),At("destroy",function(){Di||e()}),At("firstUpdate",function(){p=Pi().pid});var t=Ti.indexOf("pid=");t>-1&&(Ti=Ti.substring(0,t),"&"===Ti.slice(-1)&&(Ti=Ti.slice(0,-1))),setTimeout(function(){u&&o.bind(window,"hashchange",a.onHashChange)},40)}},onHashChange:function(){return Ri()===Ti?(Si=!0,void a.close()):void(Ii||(Ci=!0,a.goTo(Pi().pid),Ci=!1))},updateURL:function(){Zi(),Ci||(Mi?gi=setTimeout(Li,800):Li())}}}),o.extend(a,an)};return e});
;/*!waimai:static/plugin/template.js*/
window.baidu=window.baidu||{},baidu.template=baidu.template||{},baidu.template._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},baidu.template._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")};
;/*!waimai:static/plugin/zepto.js*/
var Zepto=function(){function t(t){return null==t?String(t):X[V.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function s(t){return O.call(t,function(t){return null!=t})}function u(t){return t.length>0?E.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in L?L[t]:L[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||Z[c(t)]?e:e+"px"}function h(t){var e,n;return M[t]||(e=A.createElement(t),A.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),M[t]=n),M[t]}function p(t){return"children"in t?N.call(t.children):E.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function d(t,e,n){for(T in e)n&&(o(e[T])||G(e[T]))?(o(e[T])&&!o(t[T])&&(t[T]={}),G(e[T])&&!G(t[T])&&(t[T]=[]),d(t[T],e[T],n)):e[T]!==b&&(t[T]=e[T])}function m(t,e){return null==e?E(t):E(t).filter(e)}function g(t,n,i,r){return e(n)?n.call(t,i,r):n}function v(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className,i=n&&n.baseVal!==b;return e===b?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function w(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?E.parseJSON(t):t:e):t}catch(n){return t}}function x(t,e){e(t);for(var n in t.childNodes)x(t.childNodes[n],e)}var b,T,E,j,C,S,P=[],N=P.slice,O=P.filter,A=window.document,M={},L={},Z={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$=/^(?:body|html)$/i,F=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],q=A.createElement("table"),I=A.createElement("tr"),W={tr:A.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:I,th:I,"*":A.createElement("div")},U=/complete|loaded|interactive/,H=/^[\w-]*$/,X={},V=X.toString,Y={},B=A.createElement("div"),J={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(t){return t instanceof Array};return Y.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=B).appendChild(t),i=~Y.qsa(r,e).indexOf(t),o&&B.removeChild(t),i},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},S=function(t){return O.call(t,function(e,n){return t.indexOf(e)==n})},Y.fragment=function(t,e,n){var i,r,a;return k.test(t)&&(i=E(A.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(_,"<$1></$2>")),e===b&&(e=D.test(t)&&RegExp.$1),e in W||(e="*"),a=W[e],a.innerHTML=""+t,i=E.each(N.call(a.childNodes),function(){a.removeChild(this)})),o(n)&&(r=E(i),E.each(n,function(t,e){R.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},Y.Z=function(t,e){return t=t||[],t.__proto__=E.fn,t.selector=e||"",t},Y.isZ=function(t){return t instanceof Y.Z},Y.init=function(t,n){var i;if(!t)return Y.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&D.test(t))i=Y.fragment(t,RegExp.$1,n),t=null;else{if(n!==b)return E(n).find(t);i=Y.qsa(A,t)}else{if(e(t))return E(A).ready(t);if(Y.isZ(t))return t;if(G(t))i=s(t);else if(r(t))i=[t],t=null;else if(D.test(t))i=Y.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==b)return E(n).find(t);i=Y.qsa(A,t)}}return Y.Z(i,t)},E=function(t,e){return Y.init(t,e)},E.extend=function(t){var e,n=N.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){d(t,n,e)}),t},Y.qsa=function(t,e){var n,r="#"==e[0],o=!r&&"."==e[0],a=r||o?e.slice(1):e,s=H.test(a);return i(t)&&s&&r?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:N.call(s&&!r?o?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},E.contains=function(t,e){return t!==e&&t.contains(e)},E.type=t,E.isFunction=e,E.isWindow=n,E.isArray=G,E.isPlainObject=o,E.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},E.inArray=function(t,e,n){return P.indexOf.call(e,t,n)},E.camelCase=C,E.trim=function(t){return null==t?"":String.prototype.trim.call(t)},E.uuid=0,E.support={},E.expr={},E.map=function(t,e){var n,i,r,o=[];if(a(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return u(o)},E.each=function(t,e){var n,i;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},E.grep=function(t,e){return O.call(t,e)},window.JSON&&(E.parseJSON=JSON.parse),E.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()}),E.fn={forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,indexOf:P.indexOf,concat:P.concat,map:function(t){return E(E.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return E(N.apply(this,arguments))},ready:function(t){return U.test(A.readyState)&&A.body?t(E):A.addEventListener("DOMContentLoaded",function(){t(E)},!1),this},get:function(t){return t===b?N.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return P.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):E(O.call(this,function(e){return Y.matches(e,t)}))},add:function(t,e){return E(S(this.concat(E(t,e))))},is:function(t){return this.length>0&&Y.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==b)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&e(t.item)?N.call(t):E(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return E(n)},has:function(t){return this.filter(function(){return r(t)?E.contains(this,t):E(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:E(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:E(t)},find:function(t){var e,n=this;return e="object"==typeof t?E(t).filter(function(){var t=this;return P.some.call(n,function(e){return E.contains(e,t)})}):1==this.length?E(Y.qsa(this[0],t)):this.map(function(){return Y.qsa(this,t)})},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=E(t));n&&!(r?r.indexOf(n)>=0:Y.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return E(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=E.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return m(e,t)},parent:function(t){return m(S(this.pluck("parentNode")),t)},children:function(t){return m(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return N.call(this.childNodes)})},siblings:function(t){return m(this.map(function(t,e){return O.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return E.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=E(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){E(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){E(this[0]).before(t=E(t));for(var e;(e=t.children()).length;)t=e.first();E(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=E(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){E(this).replaceWith(E(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=E(this);(t===b?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return E(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return E(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;E(this).empty().append(g(this,t,e,n))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===b?"":""+t})},attr:function(t,e){var n;return"string"==typeof t&&e===b?0==this.length||1!==this[0].nodeType?b:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:this.each(function(n){if(1===this.nodeType)if(r(t))for(T in t)v(this,T,t[T]);else v(this,t,g(this,e,n,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&v(this,t)})},prop:function(t,e){return t=J[t]||t,e===b?this[0]&&this[0][t]:this.each(function(n){this[t]=g(this,e,n,this[t])})},data:function(t,e){var n=this.attr("data-"+t.replace(F,"-$1").toLowerCase(),e);return null!==n?w(n):b},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?E(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=g(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var n=E(this),i=g(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i=this[0],r=getComputedStyle(i,"");if(!i)return;if("string"==typeof e)return i.style[C(e)]||r.getPropertyValue(e);if(G(e)){var o={};return E.each(G(e)?e:[e],function(t,e){o[e]=i.style[C(e)]||r.getPropertyValue(e)}),o}}var a="";if("string"==t(e))n||0===n?a=c(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(T in e)e[T]||0===e[T]?a+=c(T)+":"+f(T,e[T])+";":this.each(function(){this.style.removeProperty(c(T))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(E(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?P.some.call(this,function(t){return this.test(y(t))},l(t)):!1},addClass:function(t){return t?this.each(function(e){j=[];var n=y(this),i=g(this,t,e,n);i.split(/\s+/g).forEach(function(t){E(this).hasClass(t)||j.push(t)},this),j.length&&y(this,n+(n?" ":"")+j.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===b?y(this,""):(j=y(this),g(this,t,e,j).split(/\s+/g).forEach(function(t){j=j.replace(l(t)," ")}),void y(this,j.trim()))})},toggleClass:function(t,e){return t?this.each(function(n){var i=E(this),r=g(this,t,n,y(this));r.split(/\s+/g).forEach(function(t){(e===b?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===b?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===b?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=$.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(E(t).css("margin-top"))||0,n.left-=parseFloat(E(t).css("margin-left"))||0,i.top+=parseFloat(E(e[0]).css("border-top-width"))||0,i.left+=parseFloat(E(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!$.test(t.nodeName)&&"static"==E(t).css("position");)t=t.offsetParent;return t})}},E.fn.detach=E.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});E.fn[t]=function(r){var o,a=this[0];return r===b?n(a)?a["inner"+e]:i(a)?a.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){a=E(this),a.css(t,g(this,r,e,a[t]()))})}}),z.forEach(function(e,n){var i=n%2;E.fn[e]=function(){var e,r,o=E.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:Y.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null,o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return E(t).remove();x(r.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},E.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return E(t)[e](this),this}}),Y.Z.prototype=E.fn,Y.uniq=S,Y.deserializeValue=w,E.zepto=Y,E}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=h++)}function n(t,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(g[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||o&&e(t.fn)!==e(o)||a&&t.sel!=a)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!y&&t.e in w||!!e}function a(t){return x[t]||y&&w[t]||t}function s(n,r,s,u,l,h,p){var d=e(n),m=g[d]||(g[d]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(s);var r=i(e);r.fn=s,r.sel=l,r.e in x&&(s=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=h;var d=h||s;r.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=u;var e=d.apply(n,t._args==f?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=m.length,m.push(r),"addEventListener"in n&&n.addEventListener(a(r.e),r.proxy,o(r,p))})}function u(t,i,r,s,u){var c=e(t);(i||"").split(/\s/).forEach(function(e){n(t,e,r,s).forEach(function(e){delete g[c][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,o(e,u))})})}function c(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(j,function(t,i){var r=n[t];e[t]=function(){return this[i]=b,r&&r.apply(n,arguments)},e[i]=T}),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=b)),e}function l(t){var e,n={originalEvent:t};for(e in t)E.test(e)||t[e]===f||(n[e]=t[e]);return c(n,t)}var f,h=1,p=Array.prototype.slice,d=t.isFunction,m=function(t){return"string"==typeof t},g={},v={},y="onfocusin"in window,w={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:s,remove:u},t.proxy=function(n,i){if(d(n)){var r=function(){return n.apply(i,arguments)};return r._zid=e(n),r}if(m(i))return t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var b=function(){return!0},T=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,j={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,r,o){var a,c,h=this;return e&&!m(e)?(t.each(e,function(t,e){h.on(t,n,i,e,o)}),h):(m(n)||d(r)||r===!1||(r=i,i=n,n=f),(d(i)||i===!1)&&(r=i,i=f),r===!1&&(r=T),h.each(function(f,h){o&&(a=function(t){return u(h,t.type,r),r.apply(this,arguments)}),n&&(c=function(e){var i,o=t(e.target).closest(n,h).get(0);return o&&o!==h?(i=t.extend(l(e),{currentTarget:o,liveFired:h}),(a||r).apply(o,[i].concat(p.call(arguments,1)))):void 0}),s(h,e,r,i,n,c||a)}))},t.fn.off=function(e,n,i){var r=this;return e&&!m(e)?(t.each(e,function(t,e){r.off(t,n,e)}),r):(m(n)||d(i)||i===!1||(i=n,n=f),i===!1&&(i=T),r.each(function(){u(this,e,i,n)}))},t.fn.trigger=function(e,n){return e=m(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(a,s){r=l(m(e)?t.Event(e):e),r._args=i,r.target=s,t.each(n(s,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){m(t)||(e=t,t=e.type);var n=document.createEvent(v[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),c(n)}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,i,"ajaxSend",[t,e])}function a(t,e,i,r){var o=i.context,a="success";i.success.call(o,t,a,e),r&&r.resolveWith(o,[t,a,e]),n(i,o,"ajaxSuccess",[e,i,t]),u(a,e,i)}function s(t,e,i,r,o){var a=r.context;r.error.call(a,i,e,t),o&&o.rejectWith(a,[i,e,t]),n(r,a,"ajaxError",[i,r,t||e]),u(e,i,r)}function u(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function c(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==E?"html":t==T?"json":x.test(t)?"script":b.test(t)&&"xml")||"text"}function f(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=f(e.url,e.data),e.data=void 0)}function p(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function d(e,n,i,r){var o,a=t.isArray(n),s=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),r&&(n=i?r:r+"["+(s||"object"==o||"array"==o?n:"")+"]"),!r&&a?e.add(u.name,u.value):"array"==o||!i&&"object"==o?d(e,u,i,n):e.add(n,u)})}var m,g,v=0,y=window.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,T="application/json",E="text/html",j=/^\s*$/;t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var i,r,u=e.jsonpCallback,c=(t.isFunction(u)?u():u)||"jsonp"+ ++v,l=y.createElement("script"),f=window[c],h=function(e){t(l).triggerHandler("error",e||"abort")},p={abort:h};return n&&n.promise(p),t(l).on("load error",function(o,u){clearTimeout(r),t(l).off().remove(),"error"!=o.type&&i?a(i[0],p,e,n):s(null,u||"error",p,e,n),window[c]=f,i&&t.isFunction(f)&&f(i[0]),f=i=void 0}),o(p,e)===!1?(h("abort"),p):(window[c]=function(){i=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),y.head.appendChild(l),e.timeout>0&&(r=setTimeout(function(){h("timeout")},e.timeout)),p)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),r=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===n[m]&&(n[m]=t.ajaxSettings[m]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),h(n),n.cache===!1&&(n.url=f(n.url,"_="+Date.now()));var u=n.dataType,p=/\?.+=\?/.test(n.url);if("jsonp"==u||p)return p||(n.url=f(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),t.ajaxJSONP(n,r);var d,v=n.accepts[u],y={},w=function(t,e){y[t.toLowerCase()]=[t,e]},x=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,b=n.xhr(),T=b.setRequestHeader;if(r&&r.promise(b),n.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",v||"*/*"),(v=n.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(v)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&w("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(g in n.headers)w(g,n.headers[g]);if(b.setRequestHeader=w,b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=c,clearTimeout(d);var e,i=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==x){u=u||l(n.mimeType||b.getResponseHeader("content-type")),e=b.responseText;try{"script"==u?(1,eval)(e):"xml"==u?e=b.responseXML:"json"==u&&(e=j.test(e)?null:t.parseJSON(e))}catch(o){i=o}i?s(i,"parsererror",b,n,r):a(e,b,n,r)}else s(b.statusText||null,b.status?"error":"abort",b,n,r)}},o(b,n)===!1)return b.abort(),s(null,"abort",b,n,r),b;if(n.xhrFields)for(g in n.xhrFields)b[g]=n.xhrFields[g];var E="async"in n?n.async:!0;b.open(n.type,n.url,E,n.username,n.password);for(g in y)T.apply(b,y[g]);return n.timeout>0&&(d=setTimeout(function(){b.onreadystatechange=c,b.abort(),s(null,"timeout",b,n,r)},n.timeout)),b.send(n.data?n.data:null),b},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,a=e.split(/\s/),s=p(e,n,i),u=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(e){o.html(r?t("<div>").html(e.replace(w,"")).find(r):e),u&&u.apply(o,arguments)},t.ajax(s),this};var C=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(C(t)+"="+C(e))},d(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto),function(t,e){function n(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function i(t){return r?r+t:t.toLowerCase()}var r,o,a,s,u,c,l,f,h,p,d="",m={Webkit:"webkit",Moz:"",O:"o"},g=window.document,v=g.createElement("div"),y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,w={};t.each(m,function(t,n){return v.style[t+"TransitionProperty"]!==e?(d="-"+t.toLowerCase()+"-",r=n,!1):void 0}),o=d+"transform",w[a=d+"transition-property"]=w[s=d+"transition-duration"]=w[c=d+"transition-delay"]=w[u=d+"transition-timing-function"]=w[l=d+"animation-name"]=w[f=d+"animation-duration"]=w[p=d+"animation-delay"]=w[h=d+"animation-timing-function"]="",t.fx={off:r===e&&v.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:d,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},t.fn.animate=function(n,i,r,o,a){return t.isFunction(i)&&(o=i,r=e,i=e),t.isFunction(r)&&(o=r,r=e),t.isPlainObject(i)&&(r=i.easing,o=i.complete,a=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:t.fx.speeds[i]||t.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(n,i,r,o,a)},t.fn.anim=function(i,r,d,m,g){var v,x,b,T={},E="",j=this,C=t.fx.transitionEnd,S=!1;if(r===e&&(r=t.fx.speeds._default/1e3),g===e&&(g=0),t.fx.off&&(r=0),"string"==typeof i)T[l]=i,T[f]=r+"s",T[p]=g+"s",T[h]=d||"linear",C=t.fx.animationEnd;else{x=[];for(v in i)y.test(v)?E+=v+"("+i[v]+") ":(T[v]=i[v],x.push(n(v)));E&&(T[o]=E,x.push(o)),r>0&&"object"==typeof i&&(T[a]=x.join(", "),T[s]=r+"s",T[c]=g+"s",T[u]=d||"linear")}return b=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(C,b)}else t(this).unbind(C,b);S=!0,t(this).css(w),m&&m.call(this)},r>0&&(this.bind(C,b),setTimeout(function(){S||b.call(j)},1e3*r+25)),this.size()&&this.get(0).clientLeft,this.css(T),0>=r&&setTimeout(function(){j.each(function(){b.call(this)})},0),this},v=null}(Zepto),function(t){function e(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){l=null,h.last&&(h.el.trigger("longTap"),h={})}function i(){l&&clearTimeout(l),l=null}function r(){s&&clearTimeout(s),u&&clearTimeout(u),c&&clearTimeout(c),l&&clearTimeout(l),s=u=c=l=null,h={}}function o(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function a(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var s,u,c,l,f,h={},p=750;t(document).ready(function(){var d,m,g,v,y=0,w=0;"MSGesture"in window&&(f=new MSGesture,f.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(!(v=a(e,"down"))||o(e))&&(g=v?e:e.touches[0],e.touches&&1===e.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),d=Date.now(),m=d-(h.last||d),h.el=t("tagName"in g.target?g.target:g.target.parentNode),s&&clearTimeout(s),h.x1=g.pageX,h.y1=g.pageY,m>0&&250>=m&&(h.isDoubleTap=!0),h.last=d,l=setTimeout(n,p),f&&v&&f.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(v=a(t,"move"))||o(t))&&(g=v?t:t.touches[0],i(),h.x2=g.pageX,h.y2=g.pageY,y+=Math.abs(h.x1-h.x2),w+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(n){(!(v=a(n,"up"))||o(n))&&(i(),h.x2&&Math.abs(h.x1-h.x2)>10||h.y2&&Math.abs(h.y1-h.y2)>10?c=setTimeout(function(){h.el.trigger("swipe"),h.el.trigger("swipe"+e(h.x1,h.x2,h.y1,h.y2)),h={}},0):"last"in h&&(30>y&&30>w?u=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=r,h.el.trigger(e),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):s=setTimeout(function(){s=null,h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={}),y=w=0)}).on("touchcancel MSPointerCancel pointercancel",r),t(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto),function(t,e){function n(n,i,r,o,a){"function"!=typeof i||a||(a=i,i=e);var s={opacity:r};return o&&(s.scale=o,n.css(t.fx.cssPrefix+"transform-origin","0 0")),n.animate(s,i,null,a)}function i(e,i,r,o){return n(e,i,0,r,function(){a.call(t(this)),o&&o.call(this)})}var r=window.document,o=(r.documentElement,t.fn.show),a=t.fn.hide,s=t.fn.toggle;t.fn.show=function(t,i){return o.call(this),t===e?t=0:this.css("opacity",0),n(this,t,1,"1,1",i)},t.fn.hide=function(t,n){return t===e?a.call(this):i(this,t,"0,0",n)},t.fn.toggle=function(n,i){return n===e||"boolean"==typeof n?s.call(this,n):this.each(function(){var e=t(this);e["none"==e.css("display")?"show":"hide"](n,i)})},t.fn.fadeTo=function(t,e,i){return n(this,t,e,null,i)},t.fn.fadeIn=function(t,e){var n=this.css("opacity");return n>0?this.css("opacity",0):n=1,o.call(this).fadeTo(t,n,e)},t.fn.fadeOut=function(t,e){return i(this,t,null,e)},t.fn.fadeToggle=function(e,n){return this.each(function(){var i=t(this);i[0==i.css("opacity")||"none"==i.css("display")?"fadeIn":"fadeOut"](e,n)})}}(Zepto),function(t){function e(n){var i=[["resolve","done",t.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",t.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",t.Callbacks({memory:1})]],r="pending",o={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var n=arguments;return e(function(e){t.each(i,function(i,r){var s=t.isFunction(n[i])&&n[i];a[r[1]](function(){var n=s&&s.apply(this,arguments);if(n&&t.isFunction(n.promise))n.promise().done(e.resolve).fail(e.reject).progress(e.notify);else{var i=this===o?e.promise():this,a=s?[n]:arguments;e[r[0]+"With"](i,a)}})}),n=null}).promise()},promise:function(e){return null!=e?t.extend(e,o):o}},a={};return t.each(i,function(t,e){var n=e[2],s=e[3];o[e[1]]=n.add,s&&n.add(function(){r=s},i[1^t][2].disable,i[2][2].lock),a[e[0]]=function(){return a[e[0]+"With"](this===a?o:this,arguments),this},a[e[0]+"With"]=n.fireWith}),o.promise(a),n&&n.call(a,a),a}var n=Array.prototype.slice;t.when=function(i){var r,o,a,s=n.call(arguments),u=s.length,c=0,l=1!==u||i&&t.isFunction(i.promise)?u:0,f=1===l?i:e(),h=function(t,e,i){return function(o){e[t]=this,i[t]=arguments.length>1?n.call(arguments):o,i===r?f.notifyWith(e,i):--l||f.resolveWith(e,i)}};if(u>1)for(r=new Array(u),o=new Array(u),a=new Array(u);u>c;++c)s[c]&&t.isFunction(s[c].promise)?s[c].promise().done(h(c,a,s)).fail(f.reject).progress(h(c,o,r)):--l;return l||f.resolveWith(a,s),f.promise()},t.Deferred=e}(Zepto),function(t){t.Callbacks=function(e){e=t.extend({},e);var n,i,r,o,a,s,u=[],c=!e.once&&[],l=function(t){for(n=e.memory&&t,i=!0,s=o||0,o=0,a=u.length,r=!0;u&&a>s;++s)if(u[s].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}r=!1,u&&(c?c.length&&l(c.shift()):n?u.length=0:f.disable())},f={add:function(){if(u){var i=u.length,s=function(n){t.each(n,function(t,n){"function"==typeof n?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!=typeof n&&s(n)})};s(arguments),r?a=u.length:n&&(o=i,l(n))}return this},remove:function(){return u&&t.each(arguments,function(e,n){for(var i;(i=t.inArray(n,u,i))>-1;)u.splice(i,1),r&&(a>=i&&--a,s>=i&&--s)}),this},has:function(e){return!(!u||!(e?t.inArray(e,u)>-1:u.length))},empty:function(){return a=u.length=0,this},disable:function(){return u=c=n=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,n||f.disable(),this
},locked:function(){return!c},fireWith:function(t,e){return!u||i&&!c||(e=e||[],e=[t,e.slice?e.slice():e],r?c.push(e):l(e)),this},fire:function(){return f.fireWith(this,arguments)},fired:function(){return!!i}};return f}}(Zepto);
;/*!waimai:page/layout.js*/
define("waimai:page/layout",function(i){var n=i("waimai:static/utils/GlobalErrorMonitor"),o=i("jsmod/ui/dialog");$("#content").css("min-height",$(window).height()-290),window.onerror1=function(){return n.error.apply(n,arguments),!0},window.onresize=function(){$("#content").css("min-height",$(window).height()-290)},$(function(){o&&o.setOpacity(.55),$(".placeholder-con").placeholder()})});